(this["webpackJsonpactiveui-plugin-plotly-chloropleth-map"]=this["webpackJsonpactiveui-plugin-plotly-chloropleth-map"]||[]).push([[9],{1058:function(e,t,r){"use strict";e.exports={CLICK_TRANSITION_TIME:750,CLICK_TRANSITION_EASING:"poly",eventDataKeys:["currentPath","root","entry","percentRoot","percentEntry","percentParent"],gapWithPathbar:1}},1129:function(e,t,r){"use strict";var n=r(854),a=r(856),o=r(846),i=r(987),l=r(917).resizeText;function s(e,t,r,n){var l,s,c=(n||{}).hovered,u=t.data.data,f=u.i,h=u.color,p=i.isHierarchyRoot(t),d=1;if(c)l=r._hovered.marker.line.color,s=r._hovered.marker.line.width;else if(p&&h===r.root.color)d=100,l="rgba(0,0,0,0)",s=0;else if(l=o.castOption(r,f,"marker.line.color")||a.defaultLine,s=o.castOption(r,f,"marker.line.width")||0,!r._hasColorscale&&!t.onPathbar){var v=r.marker.depthfade;if(v){var x,y=a.combine(a.addOpacity(r._backgroundColor,.75),h);if(!0===v){var m=i.getMaxDepth(r);x=isFinite(m)?i.isLeaf(t)?0:r._maxVisibleLayers-(t.data.depth-r._entryDepth):t.data.height+1}else x=t.data.depth-r._entryDepth,r._atRootLevel||x++;if(x>0)for(var g=0;g<x;g++){var b=.5*g/x;h=a.combine(a.addOpacity(y,b),h)}}}e.style("stroke-width",s).call(a.fill,h).call(a.stroke,l).style("opacity",d)}e.exports={style:function(e){var t=e._fullLayout._treemaplayer.selectAll(".trace");l(e,t,"treemap"),t.each((function(e){var t=n.select(this),r=e[0].trace;t.style("opacity",r.opacity),t.selectAll("path.surface").each((function(e){n.select(this).call(s,e,r,{hovered:!1})}))}))},styleOne:s}},1130:function(e,t,r){"use strict";var n=r(854),a=r(851),o=r(928).appendArrayPointValue,i=r(929),l=r(846),s=r(1018),c=r(987),u=r(982).formatPieValue;function f(e,t,r){for(var n=e.data.data,a={curveNumber:t.index,pointNumber:n.i,data:t._input,fullData:t},i=0;i<r.length;i++){var l=r[i];l in e&&(a[l]=e[l])}return"parentString"in e&&!c.isHierarchyRoot(e)&&(a.parent=e.parentString),o(a,t,n.i),a}e.exports=function(e,t,r,o,h){var p=o[0],d=p.trace,v=p.hierarchy,x="sunburst"===d.type,y="treemap"===d.type;"_hasHoverLabel"in d||(d._hasHoverLabel=!1),"_hasHoverEvent"in d||(d._hasHoverEvent=!1);e.on("mouseover",(function(a){var o=r._fullLayout;if(!r._dragging&&!1!==o.hovermode){var s=r._fullData[d.index],m=a.data.data,g=m.i,b=c.isHierarchyRoot(a),T=c.getParent(v,a),_=c.getValue(a),w=function(e){return l.castOption(s,g,e)},I=w("hovertemplate"),S=i.castHoverinfo(s,o,g),P=o.separators;if(I||S&&"none"!==S&&"skip"!==S){var k,O;x&&(k=p.cx+a.pxmid[0]*(1-a.rInscribed),O=p.cy+a.pxmid[1]*(1-a.rInscribed)),y&&(k=a._hoverX,O=a._hoverY);var L,M={},A=[],C=[],E=function(e){return-1!==A.indexOf(e)};S&&(A="all"===S?s._module.attributes.hoverinfo.flags:S.split("+")),M.label=m.label,E("label")&&M.label&&C.push(M.label),m.hasOwnProperty("v")&&(M.value=m.v,M.valueLabel=u(M.value,P),E("value")&&C.push(M.valueLabel)),M.currentPath=a.currentPath=c.getPath(a.data),E("current path")&&!b&&C.push(M.currentPath);var j=[],z=function(){-1===j.indexOf(L)&&(C.push(L),j.push(L))};M.percentParent=a.percentParent=_/c.getValue(T),M.parent=a.parentString=c.getPtLabel(T),E("percent parent")&&(L=c.formatPercent(M.percentParent,P)+" of "+M.parent,z()),M.percentEntry=a.percentEntry=_/c.getValue(t),M.entry=a.entry=c.getPtLabel(t),!E("percent entry")||b||a.onPathbar||(L=c.formatPercent(M.percentEntry,P)+" of "+M.entry,z()),M.percentRoot=a.percentRoot=_/c.getValue(v),M.root=a.root=c.getPtLabel(v),E("percent root")&&!b&&(L=c.formatPercent(M.percentRoot,P)+" of "+M.root,z()),M.text=w("hovertext")||w("text"),E("text")&&(L=M.text,l.isValidTextValue(L)&&C.push(L));var D={trace:s,y:O,text:C.join("<br>"),name:I||E("name")?s.name:void 0,color:w("hoverlabel.bgcolor")||m.color,borderColor:w("hoverlabel.bordercolor"),fontFamily:w("hoverlabel.font.family"),fontSize:w("hoverlabel.font.size"),fontColor:w("hoverlabel.font.color"),nameLength:w("hoverlabel.namelength"),textAlign:w("hoverlabel.align"),hovertemplate:I,hovertemplateLabels:M,eventData:[f(a,s,h.eventDataKeys)]};x&&(D.x0=k-a.rInscribed*a.rpx1,D.x1=k+a.rInscribed*a.rpx1,D.idealAlign=a.pxmid[0]<0?"left":"right"),y&&(D.x=k,D.idealAlign=k<0?"left":"right"),i.loneHover(D,{container:o._hoverlayer.node(),outerContainer:o._paper.node(),gd:r}),d._hasHoverLabel=!0}if(y){var B=e.select("path.surface");h.styleOne(B,a,s,{hovered:!0})}d._hasHoverEvent=!0,r.emit("plotly_hover",{points:[f(a,s,h.eventDataKeys)],event:n.event})}})),e.on("mouseout",(function(t){var a=r._fullLayout,o=r._fullData[d.index],l=n.select(this).datum();if(d._hasHoverEvent&&(t.originalEvent=n.event,r.emit("plotly_unhover",{points:[f(l,o,h.eventDataKeys)],event:n.event}),d._hasHoverEvent=!1),d._hasHoverLabel&&(i.loneUnhover(a._hoverlayer.node()),d._hasHoverLabel=!1),y){var s=e.select("path.surface");h.styleOne(s,l,o,{hovered:!1})}})),e.on("click",(function(e){var t=r._fullLayout,o=r._fullData[d.index],l=x&&(c.isHierarchyRoot(e)||c.isLeaf(e)),u=c.getPtId(e),p=c.isEntry(e)?c.findEntryWithChild(v,u):c.findEntryWithLevel(v,u),y=c.getPtId(p),m={points:[f(e,o,h.eventDataKeys)],event:n.event};l||(m.nextLevel=y);var g=s.triggerHandler(r,"plotly_"+d.type+"click",m);if(!1!==g&&t.hovermode&&(r._hoverdata=[f(e,o,h.eventDataKeys)],i.click(r,n.event)),!l&&!1!==g&&!r._dragging&&!r._transitioning){a.call("_storeDirectGUIEdit",o,t._tracePreGUI[o.uid],{level:o.level});var b={data:[{level:y}],traces:[d.index]},T={frame:{redraw:!1,duration:h.transitionTime},transition:{duration:h.transitionTime,easing:h.transitionEasing},mode:"immediate",fromcurrent:!0};i.loneUnhover(t._hoverlayer.node()),a.call("animate",r,b,T)}}))}},1134:function(e,t,r){"use strict";function n(e,t){return e.parent===t.parent?1:2}function a(e,t){return e+t.x}function o(e,t){return Math.max(e,t.y)}r.r(t),r.d(t,"cluster",(function(){return i})),r.d(t,"hierarchy",(function(){return s})),r.d(t,"pack",(function(){return E})),r.d(t,"packSiblings",(function(){return k})),r.d(t,"packEnclose",(function(){return d})),r.d(t,"partition",(function(){return X})),r.d(t,"stratify",(function(){return V})),r.d(t,"tree",(function(){return Z})),r.d(t,"treemap",(function(){return re})),r.d(t,"treemapBinary",(function(){return ne})),r.d(t,"treemapDice",(function(){return R})),r.d(t,"treemapSlice",(function(){return $})),r.d(t,"treemapSliceDice",(function(){return ae})),r.d(t,"treemapSquarify",(function(){return te})),r.d(t,"treemapResquarify",(function(){return oe}));var i=function(){var e=n,t=1,r=1,i=!1;function l(n){var l,s=0;n.eachAfter((function(t){var r=t.children;r?(t.x=function(e){return e.reduce(a,0)/e.length}(r),t.y=function(e){return 1+e.reduce(o,0)}(r)):(t.x=l?s+=e(t,l):0,t.y=0,l=t)}));var c=function(e){for(var t;t=e.children;)e=t[0];return e}(n),u=function(e){for(var t;t=e.children;)e=t[t.length-1];return e}(n),f=c.x-e(c,u)/2,h=u.x+e(u,c)/2;return n.eachAfter(i?function(e){e.x=(e.x-n.x)*t,e.y=(n.y-e.y)*r}:function(e){e.x=(e.x-f)/(h-f)*t,e.y=(1-(n.y?e.y/n.y:1))*r})}return l.separation=function(t){return arguments.length?(e=t,l):e},l.size=function(e){return arguments.length?(i=!1,t=+e[0],r=+e[1],l):i?null:[t,r]},l.nodeSize=function(e){return arguments.length?(i=!0,t=+e[0],r=+e[1],l):i?[t,r]:null},l};function l(e){var t=0,r=e.children,n=r&&r.length;if(n)for(;--n>=0;)t+=r[n].value;else t=1;e.value=t}function s(e,t){var r,n,a,o,i,l=new h(e),s=+e.value&&(l.value=e.value),u=[l];for(null==t&&(t=c);r=u.pop();)if(s&&(r.value=+r.data.value),(a=t(r.data))&&(i=a.length))for(r.children=new Array(i),o=i-1;o>=0;--o)u.push(n=r.children[o]=new h(a[o])),n.parent=r,n.depth=r.depth+1;return l.eachBefore(f)}function c(e){return e.children}function u(e){e.data=e.data.data}function f(e){var t=0;do{e.height=t}while((e=e.parent)&&e.height<++t)}function h(e){this.data=e,this.depth=this.height=0,this.parent=null}h.prototype=s.prototype={constructor:h,count:function(){return this.eachAfter(l)},each:function(e){var t,r,n,a,o=this,i=[o];do{for(t=i.reverse(),i=[];o=t.pop();)if(e(o),r=o.children)for(n=0,a=r.length;n<a;++n)i.push(r[n])}while(i.length);return this},eachAfter:function(e){for(var t,r,n,a=this,o=[a],i=[];a=o.pop();)if(i.push(a),t=a.children)for(r=0,n=t.length;r<n;++r)o.push(t[r]);for(;a=i.pop();)e(a);return this},eachBefore:function(e){for(var t,r,n=this,a=[n];n=a.pop();)if(e(n),t=n.children)for(r=t.length-1;r>=0;--r)a.push(t[r]);return this},sum:function(e){return this.eachAfter((function(t){for(var r=+e(t.data)||0,n=t.children,a=n&&n.length;--a>=0;)r+=n[a].value;t.value=r}))},sort:function(e){return this.eachBefore((function(t){t.children&&t.children.sort(e)}))},path:function(e){for(var t=this,r=function(e,t){if(e===t)return e;var r=e.ancestors(),n=t.ancestors(),a=null;e=r.pop(),t=n.pop();for(;e===t;)a=e,e=r.pop(),t=n.pop();return a}(t,e),n=[t];t!==r;)t=t.parent,n.push(t);for(var a=n.length;e!==r;)n.splice(a,0,e),e=e.parent;return n},ancestors:function(){for(var e=this,t=[e];e=e.parent;)t.push(e);return t},descendants:function(){var e=[];return this.each((function(t){e.push(t)})),e},leaves:function(){var e=[];return this.eachBefore((function(t){t.children||e.push(t)})),e},links:function(){var e=this,t=[];return e.each((function(r){r!==e&&t.push({source:r.parent,target:r})})),t},copy:function(){return s(this).eachBefore(u)}};var p=Array.prototype.slice;var d=function(e){for(var t,r,n=0,a=(e=function(e){for(var t,r,n=e.length;n;)r=Math.random()*n--|0,t=e[n],e[n]=e[r],e[r]=t;return e}(p.call(e))).length,o=[];n<a;)t=e[n],r&&y(r,t)?++n:(r=g(o=v(o,t)),n=0);return r};function v(e,t){var r,n;if(m(t,e))return[t];for(r=0;r<e.length;++r)if(x(t,e[r])&&m(b(e[r],t),e))return[e[r],t];for(r=0;r<e.length-1;++r)for(n=r+1;n<e.length;++n)if(x(b(e[r],e[n]),t)&&x(b(e[r],t),e[n])&&x(b(e[n],t),e[r])&&m(T(e[r],e[n],t),e))return[e[r],e[n],t];throw new Error}function x(e,t){var r=e.r-t.r,n=t.x-e.x,a=t.y-e.y;return r<0||r*r<n*n+a*a}function y(e,t){var r=e.r-t.r+1e-6,n=t.x-e.x,a=t.y-e.y;return r>0&&r*r>n*n+a*a}function m(e,t){for(var r=0;r<t.length;++r)if(!y(e,t[r]))return!1;return!0}function g(e){switch(e.length){case 1:return{x:(t=e[0]).x,y:t.y,r:t.r};case 2:return b(e[0],e[1]);case 3:return T(e[0],e[1],e[2])}var t}function b(e,t){var r=e.x,n=e.y,a=e.r,o=t.x,i=t.y,l=t.r,s=o-r,c=i-n,u=l-a,f=Math.sqrt(s*s+c*c);return{x:(r+o+s/f*u)/2,y:(n+i+c/f*u)/2,r:(f+a+l)/2}}function T(e,t,r){var n=e.x,a=e.y,o=e.r,i=t.x,l=t.y,s=t.r,c=r.x,u=r.y,f=r.r,h=n-i,p=n-c,d=a-l,v=a-u,x=s-o,y=f-o,m=n*n+a*a-o*o,g=m-i*i-l*l+s*s,b=m-c*c-u*u+f*f,T=p*d-h*v,_=(d*b-v*g)/(2*T)-n,w=(v*x-d*y)/T,I=(p*g-h*b)/(2*T)-a,S=(h*y-p*x)/T,P=w*w+S*S-1,k=2*(o+_*w+I*S),O=_*_+I*I-o*o,L=-(P?(k+Math.sqrt(k*k-4*P*O))/(2*P):O/k);return{x:n+_+w*L,y:a+I+S*L,r:L}}function _(e,t,r){var n,a,o,i,l=e.x-t.x,s=e.y-t.y,c=l*l+s*s;c?(a=t.r+r.r,a*=a,i=e.r+r.r,a>(i*=i)?(n=(c+i-a)/(2*c),o=Math.sqrt(Math.max(0,i/c-n*n)),r.x=e.x-n*l-o*s,r.y=e.y-n*s+o*l):(n=(c+a-i)/(2*c),o=Math.sqrt(Math.max(0,a/c-n*n)),r.x=t.x+n*l-o*s,r.y=t.y+n*s+o*l)):(r.x=t.x+r.r,r.y=t.y)}function w(e,t){var r=e.r+t.r-1e-6,n=t.x-e.x,a=t.y-e.y;return r>0&&r*r>n*n+a*a}function I(e){var t=e._,r=e.next._,n=t.r+r.r,a=(t.x*r.r+r.x*t.r)/n,o=(t.y*r.r+r.y*t.r)/n;return a*a+o*o}function S(e){this._=e,this.next=null,this.previous=null}function P(e){if(!(a=e.length))return 0;var t,r,n,a,o,i,l,s,c,u,f;if((t=e[0]).x=0,t.y=0,!(a>1))return t.r;if(r=e[1],t.x=-r.r,r.x=t.r,r.y=0,!(a>2))return t.r+r.r;_(r,t,n=e[2]),t=new S(t),r=new S(r),n=new S(n),t.next=n.previous=r,r.next=t.previous=n,n.next=r.previous=t;e:for(l=3;l<a;++l){_(t._,r._,n=e[l]),n=new S(n),s=r.next,c=t.previous,u=r._.r,f=t._.r;do{if(u<=f){if(w(s._,n._)){r=s,t.next=r,r.previous=t,--l;continue e}u+=s._.r,s=s.next}else{if(w(c._,n._)){(t=c).next=r,r.previous=t,--l;continue e}f+=c._.r,c=c.previous}}while(s!==c.next);for(n.previous=t,n.next=r,t.next=r.previous=r=n,o=I(t);(n=n.next)!==r;)(i=I(n))<o&&(t=n,o=i);r=t.next}for(t=[r._],n=r;(n=n.next)!==r;)t.push(n._);for(n=d(t),l=0;l<a;++l)(t=e[l]).x-=n.x,t.y-=n.y;return n.r}var k=function(e){return P(e),e};function O(e){return null==e?null:L(e)}function L(e){if("function"!==typeof e)throw new Error;return e}function M(){return 0}var A=function(e){return function(){return e}};function C(e){return Math.sqrt(e.value)}var E=function(){var e=null,t=1,r=1,n=M;function a(a){return a.x=t/2,a.y=r/2,e?a.eachBefore(j(e)).eachAfter(z(n,.5)).eachBefore(D(1)):a.eachBefore(j(C)).eachAfter(z(M,1)).eachAfter(z(n,a.r/Math.min(t,r))).eachBefore(D(Math.min(t,r)/(2*a.r))),a}return a.radius=function(t){return arguments.length?(e=O(t),a):e},a.size=function(e){return arguments.length?(t=+e[0],r=+e[1],a):[t,r]},a.padding=function(e){return arguments.length?(n="function"===typeof e?e:A(+e),a):n},a};function j(e){return function(t){t.children||(t.r=Math.max(0,+e(t)||0))}}function z(e,t){return function(r){if(n=r.children){var n,a,o,i=n.length,l=e(r)*t||0;if(l)for(a=0;a<i;++a)n[a].r+=l;if(o=P(n),l)for(a=0;a<i;++a)n[a].r-=l;r.r=o+l}}}function D(e){return function(t){var r=t.parent;t.r*=e,r&&(t.x=r.x+e*t.x,t.y=r.y+e*t.y)}}var B=function(e){e.x0=Math.round(e.x0),e.y0=Math.round(e.y0),e.x1=Math.round(e.x1),e.y1=Math.round(e.y1)},R=function(e,t,r,n,a){for(var o,i=e.children,l=-1,s=i.length,c=e.value&&(n-t)/e.value;++l<s;)(o=i[l]).y0=r,o.y1=a,o.x0=t,o.x1=t+=o.value*c},X=function(){var e=1,t=1,r=0,n=!1;function a(a){var o=a.height+1;return a.x0=a.y0=r,a.x1=e,a.y1=t/o,a.eachBefore(function(e,t){return function(n){n.children&&R(n,n.x0,e*(n.depth+1)/t,n.x1,e*(n.depth+2)/t);var a=n.x0,o=n.y0,i=n.x1-r,l=n.y1-r;i<a&&(a=i=(a+i)/2),l<o&&(o=l=(o+l)/2),n.x0=a,n.y0=o,n.x1=i,n.y1=l}}(t,o)),n&&a.eachBefore(B),a}return a.round=function(e){return arguments.length?(n=!!e,a):n},a.size=function(r){return arguments.length?(e=+r[0],t=+r[1],a):[e,t]},a.padding=function(e){return arguments.length?(r=+e,a):r},a},Y={depth:-1},H={};function N(e){return e.id}function K(e){return e.parentId}var V=function(){var e=N,t=K;function r(r){var n,a,o,i,l,s,c,u=r.length,p=new Array(u),d={};for(a=0;a<u;++a)n=r[a],l=p[a]=new h(n),null!=(s=e(n,a,r))&&(s+="")&&(d[c="$"+(l.id=s)]=c in d?H:l);for(a=0;a<u;++a)if(l=p[a],null!=(s=t(r[a],a,r))&&(s+="")){if(!(i=d["$"+s]))throw new Error("missing: "+s);if(i===H)throw new Error("ambiguous: "+s);i.children?i.children.push(l):i.children=[l],l.parent=i}else{if(o)throw new Error("multiple roots");o=l}if(!o)throw new Error("no root");if(o.parent=Y,o.eachBefore((function(e){e.depth=e.parent.depth+1,--u})).eachBefore(f),o.parent=null,u>0)throw new Error("cycle");return o}return r.id=function(t){return arguments.length?(e=L(t),r):e},r.parentId=function(e){return arguments.length?(t=L(e),r):t},r};function F(e,t){return e.parent===t.parent?1:2}function q(e){var t=e.children;return t?t[0]:e.t}function U(e){var t=e.children;return t?t[t.length-1]:e.t}function W(e,t,r){var n=r/(t.i-e.i);t.c-=n,t.s+=r,e.c+=n,t.z+=r,t.m+=r}function G(e,t,r){return e.a.parent===t.parent?e.a:r}function J(e,t){this._=e,this.parent=null,this.children=null,this.A=null,this.a=this,this.z=0,this.m=0,this.c=0,this.s=0,this.t=null,this.i=t}J.prototype=Object.create(h.prototype);var Z=function(){var e=F,t=1,r=1,n=null;function a(a){var s=function(e){for(var t,r,n,a,o,i=new J(e,0),l=[i];t=l.pop();)if(n=t._.children)for(t.children=new Array(o=n.length),a=o-1;a>=0;--a)l.push(r=t.children[a]=new J(n[a],a)),r.parent=t;return(i.parent=new J(null,0)).children=[i],i}(a);if(s.eachAfter(o),s.parent.m=-s.z,s.eachBefore(i),n)a.eachBefore(l);else{var c=a,u=a,f=a;a.eachBefore((function(e){e.x<c.x&&(c=e),e.x>u.x&&(u=e),e.depth>f.depth&&(f=e)}));var h=c===u?1:e(c,u)/2,p=h-c.x,d=t/(u.x+h+p),v=r/(f.depth||1);a.eachBefore((function(e){e.x=(e.x+p)*d,e.y=e.depth*v}))}return a}function o(t){var r=t.children,n=t.parent.children,a=t.i?n[t.i-1]:null;if(r){!function(e){for(var t,r=0,n=0,a=e.children,o=a.length;--o>=0;)(t=a[o]).z+=r,t.m+=r,r+=t.s+(n+=t.c)}(t);var o=(r[0].z+r[r.length-1].z)/2;a?(t.z=a.z+e(t._,a._),t.m=t.z-o):t.z=o}else a&&(t.z=a.z+e(t._,a._));t.parent.A=function(t,r,n){if(r){for(var a,o=t,i=t,l=r,s=o.parent.children[0],c=o.m,u=i.m,f=l.m,h=s.m;l=U(l),o=q(o),l&&o;)s=q(s),(i=U(i)).a=t,(a=l.z+f-o.z-c+e(l._,o._))>0&&(W(G(l,t,n),t,a),c+=a,u+=a),f+=l.m,c+=o.m,h+=s.m,u+=i.m;l&&!U(i)&&(i.t=l,i.m+=f-u),o&&!q(s)&&(s.t=o,s.m+=c-h,n=t)}return n}(t,a,t.parent.A||n[0])}function i(e){e._.x=e.z+e.parent.m,e.m+=e.parent.m}function l(e){e.x*=t,e.y=e.depth*r}return a.separation=function(t){return arguments.length?(e=t,a):e},a.size=function(e){return arguments.length?(n=!1,t=+e[0],r=+e[1],a):n?null:[t,r]},a.nodeSize=function(e){return arguments.length?(n=!0,t=+e[0],r=+e[1],a):n?[t,r]:null},a},$=function(e,t,r,n,a){for(var o,i=e.children,l=-1,s=i.length,c=e.value&&(a-r)/e.value;++l<s;)(o=i[l]).x0=t,o.x1=n,o.y0=r,o.y1=r+=o.value*c},Q=(1+Math.sqrt(5))/2;function ee(e,t,r,n,a,o){for(var i,l,s,c,u,f,h,p,d,v,x,y=[],m=t.children,g=0,b=0,T=m.length,_=t.value;g<T;){s=a-r,c=o-n;do{u=m[b++].value}while(!u&&b<T);for(f=h=u,x=u*u*(v=Math.max(c/s,s/c)/(_*e)),d=Math.max(h/x,x/f);b<T;++b){if(u+=l=m[b].value,l<f&&(f=l),l>h&&(h=l),x=u*u*v,(p=Math.max(h/x,x/f))>d){u-=l;break}d=p}y.push(i={value:u,dice:s<c,children:m.slice(g,b)}),i.dice?R(i,r,n,a,_?n+=c*u/_:o):$(i,r,n,_?r+=s*u/_:a,o),_-=u,g=b}return y}var te=function e(t){function r(e,r,n,a,o){ee(t,e,r,n,a,o)}return r.ratio=function(t){return e((t=+t)>1?t:1)},r}(Q),re=function(){var e=te,t=!1,r=1,n=1,a=[0],o=M,i=M,l=M,s=M,c=M;function u(e){return e.x0=e.y0=0,e.x1=r,e.y1=n,e.eachBefore(f),a=[0],t&&e.eachBefore(B),e}function f(t){var r=a[t.depth],n=t.x0+r,u=t.y0+r,f=t.x1-r,h=t.y1-r;f<n&&(n=f=(n+f)/2),h<u&&(u=h=(u+h)/2),t.x0=n,t.y0=u,t.x1=f,t.y1=h,t.children&&(r=a[t.depth+1]=o(t)/2,n+=c(t)-r,u+=i(t)-r,(f-=l(t)-r)<n&&(n=f=(n+f)/2),(h-=s(t)-r)<u&&(u=h=(u+h)/2),e(t,n,u,f,h))}return u.round=function(e){return arguments.length?(t=!!e,u):t},u.size=function(e){return arguments.length?(r=+e[0],n=+e[1],u):[r,n]},u.tile=function(t){return arguments.length?(e=L(t),u):e},u.padding=function(e){return arguments.length?u.paddingInner(e).paddingOuter(e):u.paddingInner()},u.paddingInner=function(e){return arguments.length?(o="function"===typeof e?e:A(+e),u):o},u.paddingOuter=function(e){return arguments.length?u.paddingTop(e).paddingRight(e).paddingBottom(e).paddingLeft(e):u.paddingTop()},u.paddingTop=function(e){return arguments.length?(i="function"===typeof e?e:A(+e),u):i},u.paddingRight=function(e){return arguments.length?(l="function"===typeof e?e:A(+e),u):l},u.paddingBottom=function(e){return arguments.length?(s="function"===typeof e?e:A(+e),u):s},u.paddingLeft=function(e){return arguments.length?(c="function"===typeof e?e:A(+e),u):c},u},ne=function(e,t,r,n,a){var o,i,l=e.children,s=l.length,c=new Array(s+1);for(c[0]=i=o=0;o<s;++o)c[o+1]=i+=l[o].value;!function e(t,r,n,a,o,i,s){if(t>=r-1){var u=l[t];return u.x0=a,u.y0=o,u.x1=i,void(u.y1=s)}var f=c[t],h=n/2+f,p=t+1,d=r-1;for(;p<d;){var v=p+d>>>1;c[v]<h?p=v+1:d=v}h-c[p-1]<c[p]-h&&t+1<p&&--p;var x=c[p]-f,y=n-x;if(i-a>s-o){var m=(a*y+i*x)/n;e(t,p,x,a,o,m,s),e(p,r,y,m,o,i,s)}else{var g=(o*y+s*x)/n;e(t,p,x,a,o,i,g),e(p,r,y,a,g,i,s)}}(0,s,e.value,t,r,n,a)},ae=function(e,t,r,n,a){(1&e.depth?$:R)(e,t,r,n,a)},oe=function e(t){function r(e,r,n,a,o){if((i=e._squarify)&&i.ratio===t)for(var i,l,s,c,u,f=-1,h=i.length,p=e.value;++f<h;){for(s=(l=i[f]).children,c=l.value=0,u=s.length;c<u;++c)l.value+=s[c].value;l.dice?R(l,r,n,a,n+=(o-n)*l.value/p):$(l,r,n,r+=(a-r)*l.value/p,o),p-=l.value}else e._squarify=i=ee(t,e,r,n,a,o),i.ratio=t}return r.ratio=function(t){return e((t=+t)>1?t:1)},r}(Q)},1238:function(e,t,r){"use strict";var n=r(890).hovertemplateAttrs,a=r(890).texttemplateAttrs,o=r(957),i=r(932).attributes,l=r(985),s=r(1496),c=r(1058),u=r(874).extendFlat;e.exports={labels:s.labels,parents:s.parents,values:s.values,branchvalues:s.branchvalues,count:s.count,level:s.level,maxdepth:s.maxdepth,tiling:{packing:{valType:"enumerated",values:["squarify","binary","dice","slice","slice-dice","dice-slice"],dflt:"squarify",role:"info",editType:"plot",description:["Determines d3 treemap solver.","For more info please refer to https://github.com/d3/d3-hierarchy#treemap-tiling"].join(" ")},squarifyratio:{valType:"number",role:"info",min:1,dflt:1,editType:"plot",description:["When using *squarify* `packing` algorithm, according to https://github.com/d3/d3-hierarchy/blob/master/README.md#squarify_ratio","this option specifies the desired aspect ratio of the generated rectangles.","The ratio must be specified as a number greater than or equal to one.","Note that the orientation of the generated rectangles (tall or wide)","is not implied by the ratio; for example, a ratio of two will attempt","to produce a mixture of rectangles whose width:height ratio is either 2:1 or 1:2.","When using *squarify*, unlike d3 which uses the Golden Ratio i.e. 1.618034,","Plotly applies 1 to increase squares in treemap layouts."].join(" ")},flip:{valType:"flaglist",role:"info",flags:["x","y"],dflt:"",editType:"plot",description:["Determines if the positions obtained from solver are flipped on each axis."].join(" ")},pad:{valType:"number",role:"style",min:0,dflt:3,editType:"plot",description:["Sets the inner padding (in px)."].join(" ")},editType:"calc"},marker:u({pad:{t:{valType:"number",role:"style",min:0,editType:"plot",description:["Sets the padding form the top (in px)."].join(" ")},l:{valType:"number",role:"style",min:0,editType:"plot",description:["Sets the padding form the left (in px)."].join(" ")},r:{valType:"number",role:"style",min:0,editType:"plot",description:["Sets the padding form the right (in px)."].join(" ")},b:{valType:"number",role:"style",min:0,editType:"plot",description:["Sets the padding form the bottom (in px)."].join(" ")},editType:"calc"},colors:s.marker.colors,depthfade:{valType:"enumerated",values:[!0,!1,"reversed"],editType:"style",role:"style",description:["Determines if the sector colors are faded towards","the background from the leaves up to the headers.","This option is unavailable when a `colorscale` is present,","defaults to false when `marker.colors` is set,","but otherwise defaults to true.","When set to *reversed*, the fading direction is inverted,","that is the top elements within hierarchy are drawn with fully saturated colors","while the leaves are faded towards the background color."].join(" ")},line:s.marker.line,editType:"calc"},o("marker",{colorAttr:"colors",anim:!1})),pathbar:{visible:{valType:"boolean",dflt:!0,role:"info",editType:"plot",description:["Determines if the path bar is drawn","i.e. outside the trace `domain` and","with one pixel gap."].join(" ")},side:{valType:"enumerated",values:["top","bottom"],dflt:"top",role:"info",editType:"plot",description:["Determines on which side of the the treemap the","`pathbar` should be presented."].join(" ")},edgeshape:{valType:"enumerated",values:[">","<","|","/","\\"],dflt:">",role:"style",editType:"plot",description:["Determines which shape is used for edges between `barpath` labels."].join(" ")},thickness:{valType:"number",min:12,role:"info",editType:"plot",description:["Sets the thickness of `pathbar` (in px). If not specified the `pathbar.textfont.size` is used","with 3 pixles extra padding on each side."].join(" ")},textfont:u({},l.textfont,{description:"Sets the font used inside `pathbar`."}),editType:"calc"},text:l.text,textinfo:s.textinfo,texttemplate:a({editType:"plot"},{keys:c.eventDataKeys.concat(["label","value"])}),hovertext:l.hovertext,hoverinfo:s.hoverinfo,hovertemplate:n({},{keys:c.eventDataKeys}),textfont:l.textfont,insidetextfont:l.insidetextfont,outsidetextfont:u({},l.outsidetextfont,{description:["Sets the font used for `textinfo` lying outside the sector.","This option refers to the root of the hierarchy","presented on top left corner of a treemap graph.","Please note that if a hierarchy has multiple root nodes,","this option won't have any effect and `insidetextfont` would be used."].join(" ")}),textposition:{valType:"enumerated",values:["top left","top center","top right","middle left","middle center","middle right","bottom left","bottom center","bottom right"],dflt:"top left",role:"style",editType:"plot",description:["Sets the positions of the `text` elements."].join(" ")},sort:l.sort,root:s.root,domain:i({name:"treemap",trace:!0,editType:"calc"})}},1239:function(e,t,r){"use strict";e.exports={CLICK_TRANSITION_TIME:750,CLICK_TRANSITION_EASING:"linear",eventDataKeys:["currentPath","root","entry","percentRoot","percentEntry","percentParent"]}},1240:function(e,t,r){"use strict";e.exports={treemapcolorway:{valType:"colorlist",role:"style",editType:"calc",description:["Sets the default treemap slice colors. Defaults to the main","`colorway` used for trace colors. If you specify a new","list here it can still be extended with lighter and darker","colors, see `extendtreemapcolors`."].join(" ")},extendtreemapcolors:{valType:"boolean",dflt:!0,role:"style",editType:"calc",description:["If `true`, the treemap slice colors (whether given by `treemapcolorway` or","inherited from `colorway`) will be extended to three times its","original length by first repeating every color 20% lighter then","each color 20% darker. This is intended to reduce the likelihood","of reusing the same color when you have many slices, but you can","set `false` to disable.","Colors provided in the trace, using `marker.colors`, are never","extended."].join(" ")}}},1241:function(e,t,r){"use strict";var n=r(1499);t.calc=function(e,t){return n.calc(e,t)},t.crossTraceCalc=function(e){return n._runCrossTraceCalc("treemap",e)}},1242:function(e,t,r){"use strict";var n=r(1134);e.exports=function(e,t,r){var a,o=r.flipX,i=r.flipY,l="dice-slice"===r.packing,s=r.pad[i?"bottom":"top"],c=r.pad[o?"right":"left"],u=r.pad[o?"left":"right"],f=r.pad[i?"top":"bottom"];l&&(a=c,c=s,s=a,a=u,u=f,f=a);var h=n.treemap().tile(function(e,t){switch(e){case"squarify":return n.treemapSquarify.ratio(t);case"binary":return n.treemapBinary;case"dice":return n.treemapDice;case"slice":return n.treemapSlice;default:return n.treemapSliceDice}}(r.packing,r.squarifyratio)).paddingInner(r.pad.inner).paddingLeft(c).paddingRight(u).paddingTop(s).paddingBottom(f).size(l?[t[1],t[0]]:t)(e);return(l||o||i)&&function e(t,r,n){var a;n.swapXY&&(a=t.x0,t.x0=t.y0,t.y0=a,a=t.x1,t.x1=t.y1,t.y1=a);n.flipX&&(a=t.x0,t.x0=r[0]-t.x1,t.x1=r[0]-a);n.flipY&&(a=t.y0,t.y0=r[1]-t.y1,t.y1=r[1]-a);var o=t.children;if(o)for(var i=0;i<o.length;i++)e(o[i],r,n)}(h,t,{swapXY:l,flipX:o,flipY:i}),h}},1493:function(e,t,r){"use strict";e.exports=r(1494)},1494:function(e,t,r){"use strict";e.exports={moduleType:"trace",name:"treemap",basePlotModule:r(1495),categories:[],animatable:!0,attributes:r(1238),layoutAttributes:r(1240),supplyDefaults:r(1497),supplyLayoutDefaults:r(1498),calc:r(1241).calc,crossTraceCalc:r(1241).crossTraceCalc,plot:r(1500),style:r(1129).style,colorbar:r(941),meta:{description:["Visualize hierarchal data from leaves (and/or outer branches) towards root","with rectangles. The treemap sectors are determined by the entries in","*labels* or *ids* and in *parents*."].join(" ")}}},1495:function(e,t,r){"use strict";var n=r(876);t.name="treemap",t.plot=function(e,r,a,o){n.plotBasePlot(t.name,e,r,a,o)},t.clean=function(e,r,a,o){n.cleanBasePlot(t.name,e,r,a,o)}},1496:function(e,t,r){"use strict";var n=r(937),a=r(890).hovertemplateAttrs,o=r(890).texttemplateAttrs,i=r(957),l=r(932).attributes,s=r(985),c=r(1239),u=r(874).extendFlat;e.exports={labels:{valType:"data_array",editType:"calc",description:["Sets the labels of each of the sectors."].join(" ")},parents:{valType:"data_array",editType:"calc",description:["Sets the parent sectors for each of the sectors.","Empty string items '' are understood to reference","the root node in the hierarchy.",'If `ids` is filled, `parents` items are understood to be "ids" themselves.',"When `ids` is not set, plotly attempts to find matching items in `labels`,","but beware they must be unique."].join(" ")},values:{valType:"data_array",editType:"calc",description:["Sets the values associated with each of the sectors.","Use with `branchvalues` to determine how the values are summed."].join(" ")},branchvalues:{valType:"enumerated",values:["remainder","total"],dflt:"remainder",editType:"calc",role:"info",description:["Determines how the items in `values` are summed.","When set to *total*, items in `values` are taken to be value of all its descendants.","When set to *remainder*, items in `values` corresponding to the root and the branches sectors","are taken to be the extra part not part of the sum of the values at their leaves."].join(" ")},count:{valType:"flaglist",flags:["branches","leaves"],dflt:"leaves",editType:"calc",role:"info",description:["Determines default for `values` when it is not provided,","by inferring a 1 for each of the *leaves* and/or *branches*, otherwise 0."].join(" ")},level:{valType:"any",editType:"plot",anim:!0,role:"info",description:["Sets the level from which this trace hierarchy is rendered.","Set `level` to `''` to start from the root node in the hierarchy.",'Must be an "id" if `ids` is filled in, otherwise plotly attempts to find a matching',"item in `labels`."].join(" ")},maxdepth:{valType:"integer",editType:"plot",role:"info",dflt:-1,description:["Sets the number of rendered sectors from any given `level`.","Set `maxdepth` to *-1* to render all the levels in the hierarchy."].join(" ")},marker:u({colors:{valType:"data_array",editType:"calc",description:["Sets the color of each sector of this trace.","If not specified, the default trace color set is used","to pick the sector colors."].join(" ")},line:{color:u({},s.marker.line.color,{dflt:null,description:["Sets the color of the line enclosing each sector.","Defaults to the `paper_bgcolor` value."].join(" ")}),width:u({},s.marker.line.width,{dflt:1}),editType:"calc"},editType:"calc"},i("marker",{colorAttr:"colors",anim:!1})),leaf:{opacity:{valType:"number",editType:"style",role:"style",min:0,max:1,description:["Sets the opacity of the leaves. With colorscale","it is defaulted to 1; otherwise it is defaulted to 0.7"].join(" ")},editType:"plot"},text:s.text,textinfo:{valType:"flaglist",role:"info",flags:["label","text","value","current path","percent root","percent entry","percent parent"],extras:["none"],editType:"plot",description:["Determines which trace information appear on the graph."].join(" ")},texttemplate:o({editType:"plot"},{keys:c.eventDataKeys.concat(["label","value"])}),hovertext:s.hovertext,hoverinfo:u({},n.hoverinfo,{flags:["label","text","value","name","current path","percent root","percent entry","percent parent"],dflt:"label+text+value+name"}),hovertemplate:a({},{keys:c.eventDataKeys}),textfont:s.textfont,insidetextorientation:s.insidetextorientation,insidetextfont:s.insidetextfont,outsidetextfont:u({},s.outsidetextfont,{description:["Sets the font used for `textinfo` lying outside the sector.","This option refers to the root of the hierarchy","presented at the center of a sunburst graph.","Please note that if a hierarchy has multiple root nodes,","this option won't have any effect and `insidetextfont` would be used."].join(" ")}),rotation:{valType:"angle",role:"style",dflt:0,editType:"plot",description:["Rotates the whole diagram counterclockwise by some angle.","By default the first slice starts at 3 o'clock."].join(" ")},sort:s.sort,root:{color:{valType:"color",editType:"calc",role:"style",dflt:"rgba(0,0,0,0)",description:["sets the color of the root node for a sunburst or a treemap trace.","this has no effect when a colorscale is used to set the markers."].join(" ")},editType:"calc"},domain:l({name:"sunburst",trace:!0,editType:"calc"})}},1497:function(e,t,r){"use strict";var n=r(846),a=r(1238),o=r(856),i=r(932).defaults,l=r(881).handleText,s=r(948).TEXTPAD,c=r(1013),u=c.hasColorscale,f=c.handleDefaults;e.exports=function(e,t,r,c){function h(r,o){return n.coerce(e,t,a,r,o)}var p=h("labels"),d=h("parents");if(p&&p.length&&d&&d.length){var v=h("values");v&&v.length?h("branchvalues"):h("count"),h("level"),h("maxdepth"),"squarify"===h("tiling.packing")&&h("tiling.squarifyratio"),h("tiling.flip"),h("tiling.pad");var x=h("text");h("texttemplate"),t.texttemplate||h("textinfo",Array.isArray(x)?"text+label":"label"),h("hovertext"),h("hovertemplate");var y=h("pathbar.visible");l(e,t,c,h,"auto",{hasPathbar:y,moduleHasSelected:!1,moduleHasUnselected:!1,moduleHasConstrain:!1,moduleHasCliponaxis:!1,moduleHasTextangle:!1,moduleHasInsideanchor:!1}),h("textposition");var m=-1!==t.textposition.indexOf("bottom");h("marker.line.width")&&h("marker.line.color",c.paper_bgcolor);var g=h("marker.colors"),b=t._hasColorscale=u(e,"marker","colors")||(e.marker||{}).coloraxis;b?f(e,t,c,h,{prefix:"marker.",cLetter:"c"}):h("marker.depthfade",!(g||[]).length);var T=2*t.textfont.size;h("marker.pad.t",m?T/4:T),h("marker.pad.l",T/4),h("marker.pad.r",T/4),h("marker.pad.b",m?T:T/4),b&&f(e,t,c,h,{prefix:"marker.",cLetter:"c"}),t._hovered={marker:{line:{width:2,color:o.contrast(c.paper_bgcolor)}}},y&&(h("pathbar.thickness",t.pathbar.textfont.size+2*s),h("pathbar.side"),h("pathbar.edgeshape")),h("sort"),h("root.color"),i(t,c,h),t._length=null}else t.visible=!1}},1498:function(e,t,r){"use strict";var n=r(846),a=r(1240);e.exports=function(e,t){function r(r,o){return n.coerce(e,t,a,r,o)}r("treemapcolorway",t.colorway),r("extendtreemapcolors")}},1499:function(e,t,r){"use strict";var n=r(1134),a=r(861),o=r(846),i=r(1013).makeColorScaleFuncFromTrace,l=r(986).makePullColorFn,s=r(986).generateExtendedColors,c=r(1013).calc,u=r(873).ALMOST_EQUAL,f={},h={};t.calc=function(e,t){var r,s,f,h,p,d,v=e._fullLayout,x=t.ids,y=o.isArrayOrTypedArray(x),m=t.labels,g=t.parents,b=t.values,T=o.isArrayOrTypedArray(b),_=[],w={},I={},S=function(e){return e||"number"===typeof e},P=function(e){return!T||a(b[e])&&b[e]>=0};y?(r=Math.min(x.length,g.length),s=function(e){return S(x[e])&&P(e)},f=function(e){return String(x[e])}):(r=Math.min(m.length,g.length),s=function(e){return S(m[e])&&P(e)},f=function(e){return String(m[e])}),T&&(r=Math.min(r,b.length));for(var k=0;k<r;k++)if(s(k)){var O=f(k),L=S(g[k])?String(g[k]):"",M={i:k,id:O,pid:L,label:S(m[k])?String(m[k]):""};T&&(M.v=+b[k]),_.push(M),p=O,w[h=L]?w[h].push(p):w[h]=[p],I[p]=1}if(w[""]){if(w[""].length>1){for(var A=o.randstr(),C=0;C<_.length;C++)""===_[C].pid&&(_[C].pid=A);_.unshift({hasMultipleRoots:!0,id:A,pid:"",label:""})}}else{var E,j=[];for(E in w)I[E]||j.push(E);if(1!==j.length)return o.warn(["Multiple implied roots, cannot build",t.type,"hierarchy of",t.name+".","These roots include:",j.join(", ")].join(" "));E=j[0],_.unshift({hasImpliedRoot:!0,id:E,pid:"",label:E})}try{d=n.stratify().id((function(e){return e.id})).parentId((function(e){return e.pid}))(_)}catch(H){return o.warn(["Failed to build",t.type,"hierarchy of",t.name+".","Error:",H.message].join(" "))}var z=n.hierarchy(d),D=!1;if(T)switch(t.branchvalues){case"remainder":z.sum((function(e){return e.data.v}));break;case"total":z.each((function(e){var r=e.data.data,n=r.v;if(e.children){var a=e.children.reduce((function(e,t){return e+t.data.data.v}),0);if((r.hasImpliedRoot||r.hasMultipleRoots)&&(n=a),n<a*u)return D=!0,o.warn(["Total value for node",e.data.data.id,"of",t.name,"is smaller than the sum of its children.","\nparent value =",n,"\nchildren sum =",a].join(" "))}e.value=n}))}else!function e(t,r,n){var a=0,o=t.children;if(o){for(var i=o.length,l=0;l<i;l++)a+=e(o[l],r,n);n.branches&&a++}else n.leaves&&a++;t.value=t.data.data.value=a,r._values||(r._values=[]);return r._values[t.data.data.i]=a,a}(z,t,{branches:-1!==t.count.indexOf("branches"),leaves:-1!==t.count.indexOf("leaves")});if(!D){var B,R;t.sort&&z.sort((function(e,t){return t.value-e.value}));var X=t.marker.colors||[],Y=!!X.length;return t._hasColorscale?(Y||(X=T?t.values:t._values),c(e,t,{vals:X,containerStr:"marker",cLetter:"c"}),R=i(t.marker)):B=l(v["_"+t.type+"colormap"]),z.each((function(e){var r=e.data.data;r.color=t._hasColorscale?R(X[r.i]):B(X[r.i],r.id)})),_[0].hierarchy=z,_}},t._runCrossTraceCalc=function(e,t){var r=t._fullLayout,n=t.calcdata,a=r[e+"colorway"],o=r["_"+e+"colormap"];r["extend"+e+"colors"]&&(a=s(a,"treemap"===e?h:f));var i,l=0;function c(e){var t=e.data.data,r=t.id;!1===t.color&&(o[r]?t.color=o[r]:e.parent?e.parent.parent?t.color=e.parent.data.data.color:(o[r]=t.color=a[l%a.length],l++):t.color=i)}for(var u=0;u<n.length;u++){var p=n[u][0];p.trace.type===e&&p.hierarchy&&(i=p.trace.root.color,p.hierarchy.each(c))}},t.crossTraceCalc=function(e){return t._runCrossTraceCalc("sunburst",e)}},1500:function(e,t,r){"use strict";var n=r(854),a=r(987),o=r(846),i=r(948).TEXTPAD,l=r(949).toMoveInsideBar,s=r(917),c=s.recordMinTextSize,u=s.clearMinTextSize,f=r(891).resizeText,h=r(1058),p=r(1501),d=r(1504);function v(e){return a.isHierarchyRoot(e)?"":a.getPtId(e)}function x(e,t,r,s){var u=e._fullLayout,f=t[0],x=f.trace,y=f.hierarchy,m=a.findEntryWithLevel(y,x.level),g=n.select(r),b=g.selectAll("g.pathbar"),T=g.selectAll("g.slice");if(!m)return b.remove(),void T.remove();var _=a.isHierarchyRoot(m),w=!u.uniformtext.mode&&a.hasTransition(s),I=a.getMaxDepth(x),S=u._size,P=x.domain,k=S.w*(P.x[1]-P.x[0]),O=S.h*(P.y[1]-P.y[0]),L=k,M=x.pathbar.thickness,A=x.marker.line.width+h.gapWithPathbar,C=x.pathbar.visible?x.pathbar.side.indexOf("bottom")>-1?O+A:-(M+A):0,E={x0:L,x1:L,y0:C,y1:C+M},j=function(e,t,r){var n=x.tiling.pad,a=function(e){return e-n<=t.x0},o=function(e){return e+n>=t.x1},i=function(e){return e-n<=t.y0},l=function(e){return e+n>=t.y1};return{x0:a(e.x0-n)?0:o(e.x0-n)?r[0]:e.x0,x1:a(e.x1+n)?0:o(e.x1+n)?r[0]:e.x1,y0:i(e.y0-n)?0:l(e.y0-n)?r[1]:e.y0,y1:i(e.y1+n)?0:l(e.y1+n)?r[1]:e.y1}},z=null,D={},B={},R=null,X=function(e,t){return t?D[v(e)]:B[v(e)]},Y=function(e,t,r,n){if(t)return D[v(y)]||E;var a=B[x.level]||r;return function(e){return e.data.depth-m.data.depth<I}(e)?j(e,a,n):{}};f.hasMultipleRoots&&_&&I++,x._maxDepth=I,x._backgroundColor=u.paper_bgcolor,x._entryDepth=m.data.depth,x._atRootLevel=_;var H=-k/2+S.l+S.w*(P.x[1]+P.x[0])/2,N=-O/2+S.t+S.h*(1-(P.y[1]+P.y[0])/2),K=function(e){return H+e},V=function(e){return N+e},F=V(0),q=K(0),U=function(e){return q+e},W=function(e){return F+e};function G(e,t){return e+","+t}var J=U(0),Z=function(e){e.x=Math.max(J,e.x)},$=x.pathbar.edgeshape,Q=function(e,t){var r=e.x0,n=e.x1,a=e.y0,o=e.y1,s=e.textBB,f=function(e){return-1!==x.textposition.indexOf(e)},h=f("bottom"),p=f("top")||t.isHeader&&!h?"start":h?"end":"middle",d=f("right"),v=f("left")||t.onPathbar?-1:d?1:0,y=x.marker.pad;if(t.isHeader){if((r+=y.l-i)>=(n-=y.r-i)){var m=(r+n)/2;r=m,n=m}var g;h?a<(g=o-y.b)&&g<o&&(a=g):a<(g=a+y.t)&&g<o&&(o=g)}var b=l(r,n,a,o,s,{isHorizontal:!1,constrained:!0,angle:0,anchor:p,leftToRight:v});return b.fontSize=t.fontSize,b.targetX=K(b.targetX),b.targetY=V(b.targetY),isNaN(b.targetX)||isNaN(b.targetY)?{}:(r!==n&&a!==o&&c(x.type,b,u),{scale:b.scale,rotate:b.rotate,textX:b.textX,textY:b.textY,anchorX:b.anchorX,anchorY:b.anchorY,targetX:b.targetX,targetY:b.targetY})},ee=function(e,t){for(var r,n=0,a=e;!r&&n<I;)n++,(a=a.parent)?r=X(a,t):n=I;return r||{}},te=function(e,t,r,a){var i,l=X(e,t);if(l)i=l;else if(t)i=E;else if(z)if(e.parent){var s=R||r;s&&!t?i=j(e,s,a):(i={},o.extendFlat(i,ee(e,t)))}else i=e;else i={};return n.interpolate(i,{x0:e.x0,x1:e.x1,y0:e.y0,y1:e.y1})},re=function(e,t,r,i){var l=X(e,t),s={},f=Y(e,t,r,i);o.extendFlat(s,{transform:Q({x0:f.x0,x1:f.x1,y0:f.y0,y1:f.y1,textBB:e.textBB,_text:e._text},{isHeader:a.isHeader(e,x)})}),l?s=l:e.parent&&o.extendFlat(s,ee(e,t));var h=e.transform;return e.x0!==e.x1&&e.y0!==e.y1&&c(x.type,h,u),n.interpolate(s,{transform:{scale:h.scale,rotate:h.rotate,textX:h.textX,textY:h.textY,anchorX:h.anchorX,anchorY:h.anchorY,targetX:h.targetX,targetY:h.targetY}})},ne=function(e,t,r,a,o){var i=a[0],l=a[1];w?e.exit().transition().each((function(){var e=n.select(this);e.select("path.surface").transition().attrTween("d",(function(e){var r=function(e,t,r,a){var o,i=X(e,t);if(t)o=E;else{var l=X(m,t);o=l?j(e,l,a):{}}return n.interpolate(i,o)}(e,t,0,[i,l]);return function(e){return o(r(e))}})),e.select("g.slicetext").attr("opacity",0)})).remove():e.exit().remove()},ae=function(e){var t=e.transform;return e.x0!==e.x1&&e.y0!==e.y1&&c(x.type,t,u),o.getTextTransform({textX:t.textX,textY:t.textY,anchorX:t.anchorX,anchorY:t.anchorY,targetX:t.targetX,targetY:t.targetY,scale:t.scale,rotate:t.rotate})};w&&(b.each((function(e){D[v(e)]={x0:e.x0,x1:e.x1,y0:e.y0,y1:e.y1},e.transform&&(D[v(e)].transform={textX:e.transform.textX,textY:e.transform.textY,anchorX:e.transform.anchorX,anchorY:e.transform.anchorY,targetX:e.transform.targetX,targetY:e.transform.targetY,scale:e.transform.scale,rotate:e.transform.rotate})})),T.each((function(e){B[v(e)]={x0:e.x0,x1:e.x1,y0:e.y0,y1:e.y1},e.transform&&(B[v(e)].transform={textX:e.transform.textX,textY:e.transform.textY,anchorX:e.transform.anchorX,anchorY:e.transform.anchorY,targetX:e.transform.targetX,targetY:e.transform.targetY,scale:e.transform.scale,rotate:e.transform.rotate}),!z&&a.isEntry(e)&&(z=e)}))),R=p(e,t,m,T,{width:k,height:O,viewX:K,viewY:V,pathSlice:function(e){var t=K(e.x0),r=K(e.x1),n=V(e.y0),a=V(e.y1),o=r-t,i=a-n;if(!o||!i)return"";return"M"+G(t,n+0)+"L"+G(r-0,n)+"L"+G(r,a-0)+"L"+G(t+0,a)+"Z"},toMoveInsideSlice:Q,prevEntry:z,makeUpdateSliceInterpolator:te,makeUpdateTextInterpolator:re,handleSlicesExit:ne,hasTransition:w,strTransform:ae}),x.pathbar.visible?d(e,t,m,b,{barDifY:C,width:L,height:M,viewX:U,viewY:W,pathSlice:function(e){var t=U(Math.max(Math.min(e.x0,e.x0),0)),r=U(Math.min(Math.max(e.x1,e.x1),L)),n=W(e.y0),a=W(e.y1),o=M/2,i={},l={};i.x=t,l.x=r,i.y=l.y=(n+a)/2;var s={x:t,y:n},c={x:r,y:n},u={x:r,y:a},f={x:t,y:a};return">"===$?(s.x-=o,c.x-=o,u.x-=o,f.x-=o):"/"===$?(u.x-=o,f.x-=o,i.x-=o/2,l.x-=o/2):"\\"===$?(s.x-=o,c.x-=o,i.x-=o/2,l.x-=o/2):"<"===$&&(i.x-=o,l.x-=o),Z(s),Z(f),Z(i),Z(c),Z(u),Z(l),"M"+G(s.x,s.y)+"L"+G(c.x,c.y)+"L"+G(l.x,l.y)+"L"+G(u.x,u.y)+"L"+G(f.x,f.y)+"L"+G(i.x,i.y)+"Z"},toMoveInsideSlice:Q,makeUpdateSliceInterpolator:te,makeUpdateTextInterpolator:re,handleSlicesExit:ne,hasTransition:w,strTransform:ae}):b.remove()}e.exports=function(e,t,r,o){var i,l,s=e._fullLayout,c=s._treemaplayer,h=!r;(u("treemap",s),(i=c.selectAll("g.trace.treemap").data(t,(function(e){return e[0].trace.uid}))).enter().append("g").classed("trace",!0).classed("treemap",!0),i.order(),!s.uniformtext.mode&&a.hasTransition(r))?(o&&(l=o()),n.transition().duration(r.duration).ease(r.easing).each("end",(function(){l&&l()})).each("interrupt",(function(){l&&l()})).each((function(){c.selectAll("g.trace").each((function(t){x(e,t,this,r)}))}))):(i.each((function(t){x(e,t,this,r)})),s.uniformtext.mode&&f(e,s._treemaplayer.selectAll(".trace"),"treemap"));h&&i.exit().remove()}},1501:function(e,t,r){"use strict";var n=r(854),a=r(846),o=r(867),i=r(885),l=r(1242),s=r(1129).styleOne,c=r(1058),u=r(987),f=r(1130),h=r(1502).formatSliceLabel;e.exports=function(e,t,r,p,d){var v=d.width,x=d.height,y=d.viewX,m=d.viewY,g=d.pathSlice,b=d.toMoveInsideSlice,T=d.strTransform,_=d.hasTransition,w=d.handleSlicesExit,I=d.makeUpdateSliceInterpolator,S=d.makeUpdateTextInterpolator,P=d.prevEntry,k=e._fullLayout,O=t[0].trace,L=-1!==O.textposition.indexOf("left"),M=-1!==O.textposition.indexOf("right"),A=-1!==O.textposition.indexOf("bottom"),C=!A&&!O.marker.pad.t||A&&!O.marker.pad.b,E=l(r,[v,x],{packing:O.tiling.packing,squarifyratio:O.tiling.squarifyratio,flipX:O.tiling.flip.indexOf("x")>-1,flipY:O.tiling.flip.indexOf("y")>-1,pad:{inner:O.tiling.pad,top:O.marker.pad.t,left:O.marker.pad.l,right:O.marker.pad.r,bottom:O.marker.pad.b}}).descendants(),j=1/0,z=-1/0;E.forEach((function(e){var t=e.depth;t>=O._maxDepth?(e.x0=e.x1=(e.x0+e.x1)/2,e.y0=e.y1=(e.y0+e.y1)/2):(j=Math.min(j,t),z=Math.max(z,t))})),p=p.data(E,u.getPtId),O._maxVisibleLayers=isFinite(z)?z-j+1:0,p.enter().append("g").classed("slice",!0),w(p,!1,{},[v,x],g),p.order();var D=null;if(_&&P){var B=u.getPtId(P);p.each((function(e){null===D&&u.getPtId(e)===B&&(D={x0:e.x0,x1:e.x1,y0:e.y0,y1:e.y1})}))}var R=function(){return D||{x0:0,x1:v,y0:0,y1:x}},X=p;return _&&(X=X.transition().each("end",(function(){var t=n.select(this);u.setSliceCursor(t,e,{hideOnRoot:!0,hideOnLeaves:!1,isTransitioning:!1})}))),X.each((function(l){var p=u.isHeader(l,O);l._hoverX=y(l.x1-O.marker.pad.r),l._hoverY=m(A?l.y1-O.marker.pad.b/2:l.y0+O.marker.pad.t/2);var d=n.select(this),w=a.ensureSingle(d,"path","surface",(function(e){e.style("pointer-events","all")}));_?w.transition().attrTween("d",(function(e){var t=I(e,!1,R(),[v,x]);return function(e){return g(t(e))}})):w.attr("d",g),d.call(f,r,e,t,{styleOne:s,eventDataKeys:c.eventDataKeys,transitionTime:c.CLICK_TRANSITION_TIME,transitionEasing:c.CLICK_TRANSITION_EASING}).call(u.setSliceCursor,e,{isTransitioning:e._transitioning}),w.call(s,l,O,{hovered:!1}),l.x0===l.x1||l.y0===l.y1?l._text="":l._text=p?C?"":u.getPtLabel(l)||"":h(l,r,O,t,k)||"";var P=a.ensureSingle(d,"g","slicetext"),E=a.ensureSingle(P,"text","",(function(e){e.attr("data-notex",1)})),j=a.ensureUniformFontSize(e,u.determineTextFont(O,l,k.font));E.text(l._text||" ").classed("slicetext",!0).attr("text-anchor",M?"end":L||p?"start":"middle").call(o.font,j).call(i.convertToTspans,e),l.textBB=o.bBox(E.node()),l.transform=b(l,{fontSize:j.size,isHeader:p}),l.transform.fontSize=j.size,_?E.transition().attrTween("transform",(function(e){var t=S(e,!1,R(),[v,x]);return function(e){return T(t(e))}})):E.attr("transform",T(l))})),D}},1502:function(e,t,r){"use strict";var n=r(854),a=r(1134),o=r(867),i=r(846),l=r(885),s=r(917),c=s.recordMinTextSize,u=s.clearMinTextSize,f=r(1126),h=r(982).getRotationAngle,p=f.computeTransform,d=f.transformInsideText,v=r(1503).styleOne,x=r(891).resizeText,y=r(1130),m=r(1239),g=r(987);function b(e,r,s,u){var f=e._fullLayout,x=!f.uniformtext.mode&&g.hasTransition(u),b=n.select(s).selectAll("g.slice"),_=r[0],w=_.trace,I=_.hierarchy,S=g.findEntryWithLevel(I,w.level),P=g.getMaxDepth(w),k=f._size,O=w.domain,L=k.w*(O.x[1]-O.x[0]),M=k.h*(O.y[1]-O.y[0]),A=.5*Math.min(L,M),C=_.cx=k.l+k.w*(O.x[1]+O.x[0])/2,E=_.cy=k.t+k.h*(1-O.y[0])-M/2;if(!S)return b.remove();var j=null,z={};x&&b.each((function(e){z[g.getPtId(e)]={rpx0:e.rpx0,rpx1:e.rpx1,x0:e.x0,x1:e.x1,transform:e.transform},!j&&g.isEntry(e)&&(j=e)}));var D=function(e){return a.partition().size([2*Math.PI,e.height+1])(e)}(S).descendants(),B=S.height+1,R=0,X=P;_.hasMultipleRoots&&g.isHierarchyRoot(S)&&(D=D.slice(1),B-=1,R=1,X+=1),D=D.filter((function(e){return e.y1<=X}));var Y=h(w.rotation);Y&&D.forEach((function(e){e.x0+=Y,e.x1+=Y}));var H=Math.min(B,P),N=function(e){return(e-R)/H*A},K=function(e,t){return[e*Math.cos(t),-e*Math.sin(t)]},V=function(e){return i.pathAnnulus(e.rpx0,e.rpx1,e.x0,e.x1,C,E)},F=function(e){return C+T(e)[0]*(e.transform.rCenter||0)+(e.transform.x||0)},q=function(e){return E+T(e)[1]*(e.transform.rCenter||0)+(e.transform.y||0)};(b=b.data(D,g.getPtId)).enter().append("g").classed("slice",!0),x?b.exit().transition().each((function(){var e=n.select(this);e.select("path.surface").transition().attrTween("d",(function(e){var t=function(e){var t,r=g.getPtId(e),a=z[r],o=z[g.getPtId(S)];if(o){var i=(e.x1>o.x1?2*Math.PI:0)+Y;t=e.rpx1<o.rpx1?{rpx0:0,rpx1:0}:{x0:i,x1:i}}else{var l,s=g.getPtId(e.parent);b.each((function(e){if(g.getPtId(e)===s)return l=e}));var c,u=l.children;u.forEach((function(e,t){if(g.getPtId(e)===r)return c=t}));var f=u.length,h=n.interpolate(l.x0,l.x1);t={rpx0:A,rpx1:A,x0:h(c/f),x1:h((c+1)/f)}}return n.interpolate(a,t)}(e);return function(e){return V(t(e))}})),e.select("g.slicetext").attr("opacity",0)})).remove():b.exit().remove(),b.order();var U=null;if(x&&j){var W=g.getPtId(j);b.each((function(e){null===U&&g.getPtId(e)===W&&(U=e.x1)}))}var G=b;function J(e){var t=e.parent,r=z[g.getPtId(t)],a={};if(r){var o=t.children,i=o.indexOf(e),l=o.length,s=n.interpolate(r.x0,r.x1);a.x0=s(i/l),a.x1=s(i/l)}else a.x0=a.x1=0;return a}x&&(G=G.transition().each("end",(function(){var t=n.select(this);g.setSliceCursor(t,e,{hideOnRoot:!0,hideOnLeaves:!0,isTransitioning:!1})}))),G.each((function(a){var s=n.select(this),u=i.ensureSingle(s,"path","surface",(function(e){e.style("pointer-events","all")}));a.rpx0=N(a.y0),a.rpx1=N(a.y1),a.xmid=(a.x0+a.x1)/2,a.pxmid=K(a.rpx1,a.xmid),a.midangle=-(a.xmid-Math.PI/2),a.startangle=-(a.x0-Math.PI/2),a.stopangle=-(a.x1-Math.PI/2),a.halfangle=.5*Math.min(i.angleDelta(a.x0,a.x1)||Math.PI,Math.PI),a.ring=1-a.rpx0/a.rpx1,a.rInscribed=function(e){return 0===e.rpx0&&i.isFullCircle([e.x0,e.x1])?1:Math.max(0,Math.min(1/(1+1/Math.sin(e.halfangle)),e.ring/2))}(a),x?u.transition().attrTween("d",(function(e){var t=function(e){var t,r=z[g.getPtId(e)],a={x0:e.x0,x1:e.x1,rpx0:e.rpx0,rpx1:e.rpx1};if(r)t=r;else if(j)if(e.parent)if(U){var o=(e.x1>U?2*Math.PI:0)+Y;t={x0:o,x1:o}}else t={rpx0:A,rpx1:A},i.extendFlat(t,J(e));else t={rpx0:0,rpx1:0};else t={x0:Y,x1:Y};return n.interpolate(t,a)}(e);return function(e){return V(t(e))}})):u.attr("d",V),s.call(y,S,e,r,{eventDataKeys:m.eventDataKeys,transitionTime:m.CLICK_TRANSITION_TIME,transitionEasing:m.CLICK_TRANSITION_EASING}).call(g.setSliceCursor,e,{hideOnRoot:!0,hideOnLeaves:!0,isTransitioning:e._transitioning}),u.call(v,a,w);var h=i.ensureSingle(s,"g","slicetext"),b=i.ensureSingle(h,"text","",(function(e){e.attr("data-notex",1)})),T=i.ensureUniformFontSize(e,g.determineTextFont(w,a,f.font));b.text(t.formatSliceLabel(a,S,w,r,f)).classed("slicetext",!0).attr("text-anchor","middle").call(o.font,T).call(l.convertToTspans,e);var I=o.bBox(b.node());a.transform=d(I,a,_),a.transform.targetX=F(a),a.transform.targetY=q(a);var P=function(e,t){var r=e.transform;return p(r,t),r.fontSize=T.size,c(w.type,r,f),i.getTextTransform(r)};x?b.transition().attrTween("transform",(function(e){var t=function(e){var t,r=z[g.getPtId(e)],a=e.transform;if(r)t=r;else if(t={rpx1:e.rpx1,transform:{textPosAngle:a.textPosAngle,scale:0,rotate:a.rotate,rCenter:a.rCenter,x:a.x,y:a.y}},j)if(e.parent)if(U){var o=e.x1>U?2*Math.PI:0;t.x0=t.x1=o}else i.extendFlat(t,J(e));else t.x0=t.x1=Y;else t.x0=t.x1=Y;var l=n.interpolate(t.transform.textPosAngle,e.transform.textPosAngle),s=n.interpolate(t.rpx1,e.rpx1),u=n.interpolate(t.x0,e.x0),h=n.interpolate(t.x1,e.x1),p=n.interpolate(t.transform.scale,a.scale),d=n.interpolate(t.transform.rotate,a.rotate),v=0===a.rCenter?3:0===t.transform.rCenter?1/3:1,x=n.interpolate(t.transform.rCenter,a.rCenter);return function(e){var t=s(e),r=u(e),n=h(e),o=function(e){return x(Math.pow(e,v))}(e),i={pxmid:K(t,(r+n)/2),rpx1:t,transform:{textPosAngle:l(e),rCenter:o,x:a.x,y:a.y}};return c(w.type,a,f),{transform:{targetX:F(i),targetY:q(i),scale:p(e),rotate:d(e),rCenter:o}}}}(e);return function(e){return P(t(e),I)}})):b.attr("transform",P(a,I))}))}function T(e){return t=e.rpx1,r=e.transform.textPosAngle,[t*Math.sin(r),-t*Math.cos(r)];var t,r}t.plot=function(e,t,r,a){var o,i,l=e._fullLayout,s=l._sunburstlayer,c=!r,f=!l.uniformtext.mode&&g.hasTransition(r);(u("sunburst",l),(o=s.selectAll("g.trace.sunburst").data(t,(function(e){return e[0].trace.uid}))).enter().append("g").classed("trace",!0).classed("sunburst",!0).attr("stroke-linejoin","round"),o.order(),f)?(a&&(i=a()),n.transition().duration(r.duration).ease(r.easing).each("end",(function(){i&&i()})).each("interrupt",(function(){i&&i()})).each((function(){s.selectAll("g.trace").each((function(t){b(e,t,this,r)}))}))):(o.each((function(t){b(e,t,this,r)})),l.uniformtext.mode&&x(e,l._sunburstlayer.selectAll(".trace"),"sunburst"));c&&o.exit().remove()},t.formatSliceLabel=function(e,t,r,n,a){var o=r.texttemplate,l=r.textinfo;if(!o&&(!l||"none"===l))return"";var s=a.separators,c=n[0],u=e.data.data,f=c.hierarchy,h=g.isHierarchyRoot(e),p=g.getParent(f,e),d=g.getValue(e);if(!o){var v,x=l.split("+"),y=function(e){return-1!==x.indexOf(e)},m=[];if(y("label")&&u.label&&m.push(u.label),u.hasOwnProperty("v")&&y("value")&&m.push(g.formatValue(u.v,s)),!h){y("current path")&&m.push(g.getPath(e.data));var b=0;y("percent parent")&&b++,y("percent entry")&&b++,y("percent root")&&b++;var T=b>1;if(b){var _,w=function(e){v=g.formatPercent(_,s),T&&(v+=" of "+e),m.push(v)};y("percent parent")&&!h&&(_=d/g.getValue(p),w("parent")),y("percent entry")&&(_=d/g.getValue(t),w("entry")),y("percent root")&&(_=d/g.getValue(f),w("root"))}}return y("text")&&(v=i.castOption(r,u.i,"text"),i.isValidTextValue(v)&&m.push(v)),m.join("<br>")}var I=i.castOption(r,u.i,"texttemplate");if(!I)return"";var S={};u.label&&(S.label=u.label),u.hasOwnProperty("v")&&(S.value=u.v,S.valueLabel=g.formatValue(u.v,s)),S.currentPath=g.getPath(e.data),h||(S.percentParent=d/g.getValue(p),S.percentParentLabel=g.formatPercent(S.percentParent,s),S.parent=g.getPtLabel(p)),S.percentEntry=d/g.getValue(t),S.percentEntryLabel=g.formatPercent(S.percentEntry,s),S.entry=g.getPtLabel(t),S.percentRoot=d/g.getValue(f),S.percentRootLabel=g.formatPercent(S.percentRoot,s),S.root=g.getPtLabel(f),u.hasOwnProperty("color")&&(S.color=u.color);var P=i.castOption(r,u.i,"text");return(i.isValidTextValue(P)||""===P)&&(S.text=P),S.customdata=i.castOption(r,u.i,"customdata"),i.texttemplateString(I,S,a._d3locale,S,r._meta||{})}},1503:function(e,t,r){"use strict";var n=r(854),a=r(856),o=r(846),i=r(917).resizeText;function l(e,t,r){var n=t.data.data,i=!t.children,l=n.i,s=o.castOption(r,l,"marker.line.color")||a.defaultLine,c=o.castOption(r,l,"marker.line.width")||0;e.style("stroke-width",c).call(a.fill,n.color).call(a.stroke,s).style("opacity",i?r.leaf.opacity:null)}e.exports={style:function(e){var t=e._fullLayout._sunburstlayer.selectAll(".trace");i(e,t,"sunburst"),t.each((function(e){var t=n.select(this),r=e[0].trace;t.style("opacity",r.opacity),t.selectAll("path.surface").each((function(e){n.select(this).call(l,e,r)}))}))},styleOne:l}},1504:function(e,t,r){"use strict";var n=r(854),a=r(846),o=r(867),i=r(885),l=r(1242),s=r(1129).styleOne,c=r(1058),u=r(987),f=r(1130);e.exports=function(e,t,r,h,p){var d=p.barDifY,v=p.width,x=p.height,y=p.viewX,m=p.viewY,g=p.pathSlice,b=p.toMoveInsideSlice,T=p.strTransform,_=p.hasTransition,w=p.handleSlicesExit,I=p.makeUpdateSliceInterpolator,S=p.makeUpdateTextInterpolator,P={},k=e._fullLayout,O=t[0],L=O.trace,M=O.hierarchy,A=v/L._entryDepth,C=u.listPath(r.data,"id"),E=l(M.copy(),[v,x],{packing:"dice",pad:{inner:0,top:0,left:0,right:0,bottom:0}}).descendants();(E=E.filter((function(e){var t=C.indexOf(e.data.id);return-1!==t&&(e.x0=A*t,e.x1=A*(t+1),e.y0=d,e.y1=d+x,e.onPathbar=!0,!0)}))).reverse(),(h=h.data(E,u.getPtId)).enter().append("g").classed("pathbar",!0),w(h,!0,P,[v,x],g),h.order();var j=h;_&&(j=j.transition().each("end",(function(){var t=n.select(this);u.setSliceCursor(t,e,{hideOnRoot:!1,hideOnLeaves:!1,isTransitioning:!1})}))),j.each((function(l){l._hoverX=y(l.x1-Math.min(v,x)/2),l._hoverY=m(l.y1-x/2);var h=n.select(this),p=a.ensureSingle(h,"path","surface",(function(e){e.style("pointer-events","all")}));_?p.transition().attrTween("d",(function(e){var t=I(e,!0,P,[v,x]);return function(e){return g(t(e))}})):p.attr("d",g),h.call(f,r,e,t,{styleOne:s,eventDataKeys:c.eventDataKeys,transitionTime:c.CLICK_TRANSITION_TIME,transitionEasing:c.CLICK_TRANSITION_EASING}).call(u.setSliceCursor,e,{hideOnRoot:!1,hideOnLeaves:!1,isTransitioning:e._transitioning}),p.call(s,l,L,{hovered:!1}),l._text=(u.getPtLabel(l)||"").split("<br>").join(" ")||"";var d=a.ensureSingle(h,"g","slicetext"),w=a.ensureSingle(d,"text","",(function(e){e.attr("data-notex",1)})),O=a.ensureUniformFontSize(e,u.determineTextFont(L,l,k.font,{onPathbar:!0}));w.text(l._text||" ").classed("slicetext",!0).attr("text-anchor","start").call(o.font,O).call(i.convertToTspans,e),l.textBB=o.bBox(w.node()),l.transform=b(l,{fontSize:O.size,onPathbar:!0}),l.transform.fontSize=O.size,_?w.transition().attrTween("transform",(function(e){var t=S(e,!0,P,[v,x]);return function(e){return T(t(e))}})):w.attr("transform",T(l))}))}},1505:function(e,t,r){var n=r(500),a=r(297),o=r(499),i=r(70);e.exports=function(e,t){return(i(e)?n:a)(e,o(t))}},1522:function(e,t,r){"use strict";r.r(t);var n=r(7),a=r(0),o=r.n(a),i=r(20),l=r(3),s=r.n(l),c=r(902),u=r.n(c),f=r(1493),h=r.n(f),p=r(8),d=r(65),v=r.n(d),x=r(1505),y=r.n(x),m=r(23);function g(e){var t=e.cube,r=e.data,a=e.metaData,o=e.widgetState,l=o.colors,s=(o.isTextVisible,o.mapping),c=o.opacity,u=void 0===c?1:c;if(!t||!r||!a)return[];var f={},h=function(e,t){return f[e]||(f[e]=function(e,t){return{_key:e,hoverinfo:"none",textinfo:"text",branchvalues:"total",groupByToValues:{},name:t,cellsIndices:[],domain:{},type:"treemap",labels:[],values:[],parents:[],text:[],colorLabels:[],opacity:u}}(e,t)),f[e]},p=s.horizontalSubplots.length+s.verticalSubplots.length>0,d=s.groupBy.length>0,x=s.splitBy.length>0;Object(m.g)(r,a.hierarchyIndicesInCellSet,(function(e){var t=e.cell,r=e.cellIndex,o=e.columnIndex,l=e.tuple,c=e.rowIndex,u=Object(i.m)(l,a.levelIndicesPerField,s,a.attributesRedirection),f=[].concat(Object(n.a)(u.horizontalSubplots),Object(n.a)(u.verticalSubplots)),y=[].concat(Object(n.a)(u.groupBy),Object(n.a)(u.splitBy)),m=Object(i.q)(f),g=Object(i.r)(f,1),b=Object(i.i)(f),T=Object(i.i)(y),_=Object(i.i)(u.groupBy)||"all",w=t.value,I=w?Math.abs(Number(w)):0,S=function(e){var t=e.hasSubplots,r=e.hasGroupByMapping,n=e.hasSplitByMapping,a=e.subplotContainerCaption,o=e.groupName;return!t||r&&n?r&&n?o:"":a}({hasSubplots:p,hasGroupByMapping:d,hasSplitByMapping:x,subplotContainerCaption:b,groupName:_}),P=h(m,g);p&&0===P.labels.length&&(P.labels.push(b),P.values.push(void 0),P.parents.push(""),P.cellsIndices.push(null),P.colorLabels.push(null),P.text.push("")),P.text.push(Object(i.i)(x?u.splitBy:u.groupBy)),P.cellsIndices.push([{columnIndex:o,rowIndex:c,cellIndex:r}]),P.labels.push(T),P.values.push(I),w&&void 0!==S&&P.parents.push(S),d&&x&&(P.groupByToValues[_]=(P.groupByToValues[_]||0)+I),P.colorLabels.push(_),p||d&&x||v()(P,["marker","pad"],{t:0,l:0,b:0,r:0})}));var g=Object.values(f),b={mapping:{},numberOfUsedAutomaticColors:0};if(g.forEach((function(e){var t;v()(e,["marker","color"],null===(t=e.colorLabels)||void 0===t?void 0:t.map((function(e){return e?Object(i.p)({accumulator:b,colorway:a.colorway,colors:l,traceName:e}):null})))})),g.forEach((function(e){var t=[];y()(e.groupByToValues,(function(r,n){e.labels.push(n),e.values.push(r);var a=p?e.labels[0]:"";e.parents.push(a),e.cellsIndices.push(null),e.text.push(n),t.push(n)}));var r=t.map((function(e){return b.mapping[e]||""}));e.marker&&(e.marker.color=[].concat(Object(n.a)(e.marker.color),Object(n.a)(r))),Reflect.deleteProperty(e,"groupByToValues")})),p){var T=a.subplots,_=Object(i.v)({traces:g,subplotsMetaData:T});return Object(i.f)(_,T),_}return g}u.a.register(h.a);var b=function(e,t){return t.on("plotly_treemapclick",(function(){return!1}))},T=Object(i.D)(Object(i.C)(Object(a.memo)((function(e){var t=e.cube,r=e.data,n=e.metaData,l=e.widgetState,c=e.onLoaded,u=Object(a.useMemo)((function(){return Object(p.v)(null===l||void 0===l?void 0:l.mapping)}),[null===l||void 0===l?void 0:l.mapping]);Object(i.A)({isEmpty:u,onLoaded:c});var f=Object(a.useMemo)((function(){return g({cube:t,data:r,metaData:n,widgetState:l})}),[t,r,n,l]),h=Object(a.useMemo)((function(){return function(e){return e?Object(i.l)(e.subplots):{}}(n)}),[n]);return t&&r&&n&&!u?o.a.createElement(i.d,s()({},e,{traces:f,layout:h,cube:t,data:r,metaData:n,onInitialized:b})):o.a.createElement(i.a,null)}))));t.default=T},987:function(e,t,r){"use strict";var n=r(846),a=r(856),o=r(946),i=r(982);function l(e){return e.data.data.pid}t.findEntryWithLevel=function(e,r){var n;return r&&e.eachAfter((function(e){if(t.getPtId(e)===r)return n=e.copy()})),n||e},t.findEntryWithChild=function(e,r){var n;return e.eachAfter((function(e){for(var a=e.children||[],o=0;o<a.length;o++){var i=a[o];if(t.getPtId(i)===r)return n=e.copy()}})),n||e},t.isEntry=function(e){return!e.parent},t.isLeaf=function(e){return!e.children},t.getPtId=function(e){return e.data.data.id},t.getPtLabel=function(e){return e.data.data.label},t.getValue=function(e){return e.value},t.isHierarchyRoot=function(e){return""===l(e)},t.setSliceCursor=function(e,r,n){var a=n.isTransitioning;if(!a){var i=e.datum();a=n.hideOnRoot&&t.isHierarchyRoot(i)||n.hideOnLeaves&&t.isLeaf(i)}o(e,a?null:"pointer")},t.getInsideTextFontKey=function(e,t,r,a,o){var i=(o||{}).onPathbar?"pathbar.textfont":"insidetextfont",l=r.data.data.i;return n.castOption(t,l,i+"."+e)||n.castOption(t,l,"textfont."+e)||a.size},t.getOutsideTextFontKey=function(e,t,r,a){var o=r.data.data.i;return n.castOption(t,o,"outsidetextfont."+e)||n.castOption(t,o,"textfont."+e)||a.size},t.isOutsideText=function(e,r){return!e._hasColorscale&&t.isHierarchyRoot(r)},t.determineTextFont=function(e,r,o,i){return t.isOutsideText(e,r)?function(e,r,n){return{color:t.getOutsideTextFontKey("color",e,r,n),family:t.getOutsideTextFontKey("family",e,r,n),size:t.getOutsideTextFontKey("size",e,r,n)}}(e,r,o):function(e,r,o,i){var l=(i||{}).onPathbar,s=r.data.data,c=s.i,u=n.castOption(e,c,(l?"pathbar.textfont":"insidetextfont")+".color");return!u&&e._input.textfont&&(u=n.castOption(e._input,c,"textfont.color")),{color:u||a.contrast(s.color),family:t.getInsideTextFontKey("family",e,r,o,i),size:t.getInsideTextFontKey("size",e,r,o,i)}}(e,r,o,i)},t.hasTransition=function(e){return!!(e&&e.duration>0)},t.getMaxDepth=function(e){return e.maxdepth>=0?e.maxdepth:1/0},t.isHeader=function(e,r){return!(t.isLeaf(e)||e.depth===r._maxDepth-1)},t.getParent=function(e,r){return t.findEntryWithLevel(e,l(r))},t.listPath=function(e,r){var n=e.parent;if(!n)return[];var a=r?[n.data[r]]:[n];return t.listPath(n,r).concat(a)},t.getPath=function(e){return t.listPath(e,"label").join("/")+"/"},t.formatValue=i.formatPieValue,t.formatPercent=function(e,t){var r=n.formatPercent(e,0);return"0%"===r&&(r=i.formatPiePercent(e,t)),r}}}]);