(this["webpackJsonpactiveui-plugin-plotly-chloropleth-map"]=this["webpackJsonpactiveui-plugin-plotly-chloropleth-map"]||[]).push([[11],{1057:function(e,t,a){"use strict";e.exports={INCREASING:{COLOR:"#3D9970",SYMBOL:"\u25b2"},DECREASING:{COLOR:"#FF4136",SYMBOL:"\u25bc"}}},1232:function(e,t,a){"use strict";var i=a(903),n=a(944).line,r=a(937),o=a(890).hovertemplateAttrs,l=a(890).texttemplateAttrs,s=a(1479),c=a(874).extendFlat,u=a(856);function p(e){return{marker:{color:c({},i.marker.color,{arrayOk:!1,editType:"style",description:"Sets the marker color of all "+e+" values."}),line:{color:c({},i.marker.line.color,{arrayOk:!1,editType:"style",description:"Sets the line color of all "+e+" values."}),width:c({},i.marker.line.width,{arrayOk:!1,editType:"style",description:"Sets the line width of all "+e+" values."}),editType:"style"},editType:"style"},editType:"style"}}e.exports={measure:{valType:"data_array",dflt:[],role:"info",editType:"calc",description:["An array containing types of values.","By default the values are considered as 'relative'.","However; it is possible to use 'total' to compute the sums.","Also 'absolute' could be applied to reset the computed total","or to declare an initial value where needed."].join(" ")},base:{valType:"number",dflt:null,arrayOk:!1,role:"info",editType:"calc",description:["Sets where the bar base is drawn (in position axis units)."].join(" ")},x:i.x,x0:i.x0,dx:i.dx,y:i.y,y0:i.y0,dy:i.dy,xperiod:i.xperiod,yperiod:i.yperiod,xperiod0:i.xperiod0,yperiod0:i.yperiod0,xperiodalignment:i.xperiodalignment,yperiodalignment:i.yperiodalignment,hovertext:i.hovertext,hovertemplate:o({},{keys:s.eventDataKeys}),hoverinfo:c({},r.hoverinfo,{flags:["name","x","y","text","initial","delta","final"]}),textinfo:{valType:"flaglist",flags:["label","text","initial","delta","final"],extras:["none"],role:"info",editType:"plot",arrayOk:!1,description:["Determines which trace information appear on the graph.","In the case of having multiple waterfalls, totals","are computed separately (per trace)."].join(" ")},texttemplate:l({editType:"plot"},{keys:s.eventDataKeys.concat(["label"])}),text:i.text,textposition:i.textposition,insidetextanchor:i.insidetextanchor,textangle:i.textangle,textfont:i.textfont,insidetextfont:i.insidetextfont,outsidetextfont:i.outsidetextfont,constraintext:i.constraintext,cliponaxis:i.cliponaxis,orientation:i.orientation,offset:i.offset,width:i.width,increasing:p("increasing"),decreasing:p("decreasing"),totals:p("intermediate sums and total"),connector:{line:{color:c({},n.color,{dflt:u.defaultLine}),width:c({},n.width,{editType:"plot"}),dash:n.dash,editType:"plot"},mode:{valType:"enumerated",values:["spanning","between"],dflt:"between",role:"info",editType:"plot",description:["Sets the shape of connector lines."].join(" ")},visible:{valType:"boolean",dflt:!0,role:"info",editType:"plot",description:["Determines if connector lines are drawn. "].join(" ")},editType:"plot"},offsetgroup:i.offsetgroup,alignmentgroup:i.alignmentgroup}},1233:function(e,t,a){"use strict";e.exports={waterfallmode:{valType:"enumerated",values:["group","overlay"],dflt:"group",role:"info",editType:"calc",description:["Determines how bars at the same location coordinate","are displayed on the graph.","With *group*, the bars are plotted next to one another","centered around the shared location.","With *overlay*, the bars are plotted over one another,","you might need to an *opacity* to see multiple bars."].join(" ")},waterfallgap:{valType:"number",min:0,max:1,role:"style",editType:"calc",description:["Sets the gap (in plot fraction) between bars of","adjacent location coordinates."].join(" ")},waterfallgroupgap:{valType:"number",min:0,max:1,dflt:0,role:"style",editType:"calc",description:["Sets the gap (in plot fraction) between bars of","the same location coordinate."].join(" ")}}},1234:function(e,t,a){"use strict";var i=a(846),n=a(881).handleGroupingDefaults,r=a(881).handleText,o=a(1020),l=a(1021),s=a(1232),c=a(856),u=a(1057),p=u.INCREASING.COLOR,d=u.DECREASING.COLOR;function f(e,t,a){e(t+".marker.color",a),e(t+".marker.line.color",c.defaultLine),e(t+".marker.line.width")}e.exports={supplyDefaults:function(e,t,a,n){function c(a,n){return i.coerce(e,t,s,a,n)}if(o(e,t,n,c)){l(e,t,n,c),c("measure"),c("orientation",t.x&&!t.y?"h":"v"),c("base"),c("offset"),c("width"),c("text"),c("hovertext"),c("hovertemplate");var u=c("textposition");if(r(e,t,n,c,u,{moduleHasSelected:!1,moduleHasUnselected:!1,moduleHasConstrain:!0,moduleHasCliponaxis:!0,moduleHasTextangle:!0,moduleHasInsideanchor:!0}),"none"!==t.textposition&&(c("texttemplate"),t.texttemplate||c("textinfo")),f(c,"increasing",p),f(c,"decreasing",d),f(c,"totals","#4499FF"),c("connector.visible"))c("connector.mode"),c("connector.line.width")&&(c("connector.line.color"),c("connector.line.dash"))}else t.visible=!1},crossTraceDefaults:function(e,t){var a,r;function o(e){return i.coerce(r._input,r,s,e)}if("group"===t.waterfallmode)for(var l=0;l<e.length;l++)a=(r=e[l])._input,n(a,r,t,o)}}},1477:function(e,t,a){"use strict";e.exports=a(1478)},1478:function(e,t,a){"use strict";e.exports={attributes:a(1232),layoutAttributes:a(1233),supplyDefaults:a(1234).supplyDefaults,crossTraceDefaults:a(1234).crossTraceDefaults,supplyLayoutDefaults:a(1480),calc:a(1481),crossTraceCalc:a(1482),plot:a(1483),style:a(1484).style,hoverPoints:a(1485),eventData:a(1486),selectPoints:a(960),moduleType:"trace",name:"waterfall",basePlotModule:a(931),categories:["bar-like","cartesian","svg","oriented","showLegend","zoomScale"],meta:{description:["Draws waterfall trace which is useful graph to displays the","contribution of various elements (either positive or negative)","in a bar chart. The data visualized by the span of the bars is","set in `y` if `orientation` is set th *v* (the default) and the","labels are set in `x`.","By setting `orientation` to *h*, the roles are interchanged."].join(" ")}}},1479:function(e,t,a){"use strict";e.exports={eventDataKeys:["initial","delta","final"]}},1480:function(e,t,a){"use strict";var i=a(846),n=a(1233);e.exports=function(e,t,a){var r=!1;function o(a,r){return i.coerce(e,t,n,a,r)}for(var l=0;l<a.length;l++){var s=a[l];if(s.visible&&"waterfall"===s.type){r=!0;break}}r&&(o("waterfallmode"),o("waterfallgap",.2),o("waterfallgroupgap"))}},1481:function(e,t,a){"use strict";var i=a(864),n=a(947),r=a(846).mergeArray,o=a(940),l=a(873).BADNUM;function s(e){return"a"===e||"absolute"===e}function c(e){return"t"===e||"total"===e}e.exports=function(e,t){var a,u,p,d,f=i.getFromId(e,t.xaxis||"x"),h=i.getFromId(e,t.yaxis||"y");"h"===t.orientation?(a=f.makeCalcdata(t,"x"),p=h.makeCalcdata(t,"y"),u=n(t,h,"y",p),d=!!t.yperiodalignment):(a=h.makeCalcdata(t,"y"),p=f.makeCalcdata(t,"x"),u=n(t,f,"x",p),d=!!t.xperiodalignment);for(var m,y=Math.min(u.length,a.length),x=new Array(y),v=0,g=!1,b=0;b<y;b++){var w=a[b]||0,S=!1;(a[b]!==l||c(t.measure[b])||s(t.measure[b]))&&b+1<y&&(a[b+1]!==l||c(t.measure[b+1])||s(t.measure[b+1]))&&(S=!0);var T=x[b]={i:b,p:u[b],s:w,rawS:w,cNext:S};s(t.measure[b])?(v=T.s,T.isSum=!0,T.dir="totals",T.s=v):c(t.measure[b])?(T.isSum=!0,T.dir="totals",T.s=v):(T.isSum=!1,T.dir=T.rawS<0?"decreasing":"increasing",m=T.s,T.s=v+m,v+=m),"totals"===T.dir&&(g=!0),d&&(x[b].orig_p=p[b]),t.ids&&(T.id=String(t.ids[b])),T.v=(t.base||0)+v}return x.length&&(x[0].hasTotals=g),r(t.text,x,"tx"),r(t.hovertext,x,"htx"),o(x,t),x}},1482:function(e,t,a){"use strict";var i=a(958).setGroupPositions;e.exports=function(e,t){var a,n,r=e._fullLayout,o=e._fullData,l=e.calcdata,s=t.xaxis,c=t.yaxis,u=[],p=[],d=[];for(n=0;n<o.length;n++){var f=o[n];!0===f.visible&&f.xaxis===s._id&&f.yaxis===c._id&&"waterfall"===f.type&&(a=l[n],"h"===f.orientation?d.push(a):p.push(a),u.push(a))}var h={mode:r.waterfallmode,norm:r.waterfallnorm,gap:r.waterfallgap,groupgap:r.waterfallgroupgap};for(i(e,s,c,p,h),i(e,c,s,d,h),n=0;n<u.length;n++){a=u[n];for(var m=0;m<a.length;m++){var y=a[m];!1===y.isSum&&(y.s0+=0===m?0:a[m-1].s),m+1<a.length&&(a[m].nextP0=a[m+1].p0,a[m].nextS0=a[m+1].s0)}}}},1483:function(e,t,a){"use strict";var i=a(854),n=a(846),r=a(867),o=a(873).BADNUM,l=a(949),s=a(917).clearMinTextSize;e.exports=function(e,t,a,c){var u=e._fullLayout;s("waterfall",u),l.plot(e,t,a,c,{mode:u.waterfallmode,norm:u.waterfallmode,gap:u.waterfallgap,groupgap:u.waterfallgroupgap}),function(e,t,a,l){var s=t.xaxis,c=t.yaxis;n.makeTraceGroups(l,a,"trace bars").each((function(a){var l=i.select(this),u=a[0].trace,p=n.ensureSingle(l,"g","lines");if(u.connector&&u.connector.visible){var d="h"===u.orientation,f=u.connector.mode,h=p.selectAll("g.line").data(n.identity);h.enter().append("g").classed("line",!0),h.exit().remove();var m=h.size();h.each((function(a,l){if(l===m-1||a.cNext){var u=function(e,t,a,i){var n=[],r=[],o=i?t:a,l=i?a:t;return n[0]=o.c2p(e.s0,!0),r[0]=l.c2p(e.p0,!0),n[1]=o.c2p(e.s1,!0),r[1]=l.c2p(e.p1,!0),n[2]=o.c2p(e.nextS0,!0),r[2]=l.c2p(e.nextP0,!0),i?[n,r]:[r,n]}(a,s,c,d),p=u[0],h=u[1],y="";p[0]!==o&&h[0]!==o&&p[1]!==o&&h[1]!==o&&("spanning"===f&&!a.isSum&&l>0&&(y+=d?"M"+p[0]+","+h[1]+"V"+h[0]:"M"+p[1]+","+h[0]+"H"+p[0]),"between"!==f&&(a.isSum||l<m-1)&&(y+=d?"M"+p[1]+","+h[0]+"V"+h[1]:"M"+p[0]+","+h[1]+"H"+p[1]),p[2]!==o&&h[2]!==o&&(y+=d?"M"+p[1]+","+h[1]+"V"+h[2]:"M"+p[1]+","+h[1]+"H"+p[2])),""===y&&(y="M0,0Z"),n.ensureSingle(i.select(this),"path").attr("d",y).call(r.setClipUrl,t.layerClipId,e)}}))}else p.remove()}))}(e,t,a,c)}},1484:function(e,t,a){"use strict";var i=a(854),n=a(867),r=a(856),o=a(1042).DESELECTDIM,l=a(891),s=a(917).resizeText,c=l.styleTextPoints;e.exports={style:function(e,t,a){var l=a||i.select(e).selectAll("g.waterfalllayer").selectAll("g.trace");s(e,l,"waterfall"),l.style("opacity",(function(e){return e[0].trace.opacity})),l.each((function(t){var a=i.select(this),l=t[0].trace;a.selectAll(".point > path").each((function(e){if(!e.isBlank){var t=l[e.dir].marker;i.select(this).call(r.fill,t.color).call(r.stroke,t.line.color).call(n.dashLine,t.line.dash,t.line.width).style("opacity",l.selectedpoints&&!e.selected?o:1)}})),c(a,l,e),a.selectAll(".lines").each((function(){var e=l.connector.line;n.lineGroupStyle(i.select(this).selectAll("path"),e.width,e.color,e.dash)}))}))}}},1485:function(e,t,a){"use strict";var i=a(864).hoverLabelText,n=a(856).opacity,r=a(959).hoverOnBars,o=a(1057),l=o.INCREASING.SYMBOL,s=o.DECREASING.SYMBOL;e.exports=function(e,t,a,o){var c=r(e,t,a,o);if(c){var u=c.cd,p=u[0].trace,d="h"===p.orientation,f=d?e.xa:e.ya,h=u[c.index],m=h.isSum?h.b+h.s:h.rawS;if(!h.isSum){c.initial=h.b+h.s-m,c.delta=m,c.final=c.initial+c.delta;var y=S(Math.abs(c.delta));c.deltaLabel=m<0?"("+y+")":y,c.finalLabel=S(c.final),c.initialLabel=S(c.initial)}var x=h.hi||p.hoverinfo,v=[];if(x&&"none"!==x&&"skip"!==x){var g="all"===x,b=x.split("+"),w=function(e){return g||-1!==b.indexOf(e)};h.isSum||(!w("final")||w(d?"x":"y")||v.push(c.finalLabel),w("delta")&&(m<0?v.push(c.deltaLabel+" "+s):v.push(c.deltaLabel+" "+l)),w("initial")&&v.push("Initial: "+c.initialLabel))}return v.length&&(c.extraText=v.join("<br>")),c.color=function(e,t){var a=e[t.dir].marker,i=a.color,r=a.line.color,o=a.line.width;if(n(i))return i;if(n(r)&&o)return r}(p,h),[c]}function S(e){return i(f,e)}}},1486:function(e,t,a){"use strict";e.exports=function(e,t){return e.x="xVal"in t?t.xVal:t.x,e.y="yVal"in t?t.yVal:t.y,"initial"in t&&(e.initial=t.initial),"delta"in t&&(e.delta=t.delta),"final"in t&&(e.final=t.final),t.xa&&(e.xaxis=t.xa),t.ya&&(e.yaxis=t.ya),e}},1515:function(e,t,a){"use strict";a.r(t);var i=a(0),n=a.n(i),r=a(20),o=a(3),l=a.n(o),s=a(902),c=a.n(s),u=a(1477),p=a.n(u),d=a(8),f=a(65),h=a.n(f),m=a(207),y=a(73);c.a.register(p.a);var x=Object(r.D)(Object(r.C)(Object(i.memo)((function(e){var t=e.cube,a=e.data,o=e.metaData,s=e.widgetState,c=e.onLoaded,u=Object(i.useMemo)((function(){return Object(d.v)(null===s||void 0===s?void 0:s.mapping)}),[null===s||void 0===s?void 0:s.mapping]);Object(r.A)({isEmpty:u,onLoaded:c});var p=Object(i.useMemo)((function(){return function(e){var t=e.cube,a=e.data,i=e.metaData,n=e.widgetState;return t&&a&&i?Object(m.a)({cube:t,data:a,metaData:i,widgetState:n}).map((function(e){return e.type="waterfall",h()(e,["increasing","marker","color"],"#59a14f"),h()(e,["decreasing","marker","color"],"#e15759"),e})):[]}({cube:t,data:a,metaData:o,widgetState:s})}),[t,a,o,s]),f=Object(i.useMemo)((function(){return function(e){return e?Object(y.b)({xaxis:{gridcolor:"transparent"}},Object(r.l)(e.subplots),Object(r.k)(e.subplots)):{}}(o)}),[o]);return t&&a&&o&&!u?n.a.createElement(r.d,l()({},e,{traces:p,layout:f,cube:t,data:a,metaData:o})):n.a.createElement(r.a,null)}))));t.default=x}}]);