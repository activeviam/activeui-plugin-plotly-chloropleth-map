(this["webpackJsonpactiveui-plugin-plotly-chloropleth-map"]=this["webpackJsonpactiveui-plugin-plotly-chloropleth-map"]||[]).push([[33],{1517:function(e,t,a){"use strict";a.r(t);var c=a(5),n=a(7),r=a(35),o=a(0),l=a.n(o),i=a(20),s=a(3),u=a.n(s),b=a(8),p=a(135),d=a.n(p),m=a(76),v=a.n(m),h=a(23),O=a(73),j=function(e){var t=[];return e.forEach((function(e){var a=e.name;t.includes(a)||(e.showlegend=!0,t.push(a))})),e};function f(e){var t=e.cube,a=e.data,o=e.metaData,l=e.widgetState,s=l.colors,u=l.isTextVisible,b=l.mapping,p=l.opacity,m=void 0===p?1:p;if(!t||!a||!o)return[];var O={},f={},y={mapping:{},numberOfUsedAutomaticColors:0},g=o.attributesRedirection;var x=function(e){var t=e.membersPerAttribute,a=e.pointKey,c=e.traceKey;return f[c]||(f[c]=function(e){var t=e.traceKey,a=e.membersPerAttribute,c=Object(i.r)(a.color,0),n=Object.values(f).some((function(e){return e.name===c})),r=Object(i.p)({accumulator:y,colorway:o.colorway,colors:s,traceName:c});return{_key:t,hoverinfo:"none",legendgroup:c,mode:u?"text+markers":"markers",name:c,cellsIndices:[],showlegend:!n,text:[],textposition:"top center",type:"scatter",marker:{size:[],color:r},x:[],y:[],opacity:m}}({traceKey:c,membersPerAttribute:t})),d()(O,Object(r.a)({},c,Object(r.a)({},a,{}))),O[c][a]},I=b.size.length>0,w=0,k=b.horizontalSubplots.length+b.verticalSubplots.length>0;Object(h.g)(a,o.hierarchyIndicesInCellSet,(function(e){var t=e.cell,a=e.cellIndex,c=e.columnIndex,r=e.tuple,l=e.rowIndex,s=Object(i.m)(r,o.levelIndicesPerField,b,g),u=[].concat(Object(n.a)(s.color),Object(n.a)(s.horizontalSubplots),Object(n.a)(s.verticalSubplots)),p=s.splitBy,d=Object(i.q)(u),m=Object(i.q)(p),v=t.value,h=x({membersPerAttribute:s,traceKey:d,pointKey:m});if(h.cellsIndices||(h.cellsIndices=[]),h.cellsIndices.push({rowIndex:l,columnIndex:c,cellIndex:a}),s.xValues.length>0)h.x=v;else if(s.yValues.length>0)h.y=v;else if(s.size.length>0){var O=Math.abs(v);h.size=O,O>w&&(w=O)}s.splitBy.length>0&&(h.text=Object(i.i)(s.splitBy))})),Object.entries(f).forEach((function(e){var t=Object(c.a)(e,2),a=t[0],n=t[1],r=O[a];I||(n.marker.size=15),Object.values(r).forEach((function(e){var t=e.cellsIndices,a=e.x,c=e.y,r=e.size,o=e.text;n.cellsIndices.push(t),n.x.push(a),n.y.push(c),n.text.push(o),I&&n.marker.size.push(100*r/w)}))}));var z=Object.values(f);if(z.forEach((function(e){var t;e.axisIndices=v()(null===(t=e.x)||void 0===t?void 0:t.length)})),k){var S=o.subplots,E=Object(i.v)({traces:z,subplotsMetaData:S});return Object(i.g)(E,S),j(E),E}return j(z),z}var y=Object(i.D)(Object(i.C)(Object(o.memo)((function(e){var t=e.cube,a=e.data,c=e.metaData,n=e.widgetState,r=e.onLoaded,s=Object(o.useMemo)((function(){return Object(b.v)(null===n||void 0===n?void 0:n.mapping)}),[null===n||void 0===n?void 0:n.mapping]);Object(i.A)({isEmpty:s,onLoaded:r});var p=Object(o.useMemo)((function(){return f({cube:t,data:a,metaData:c,widgetState:n})}),[t,a,c,n]),d=Object(o.useMemo)((function(){return function(e){return e?Object(O.b)(i.u,Object(i.l)(e.subplots),Object(i.k)(e.subplots)):{}}(c)}),[c]);return t&&a&&c&&!s?l.a.createElement(i.d,u()({},e,{traces:p,layout:d,cube:t,data:a,metaData:c})):l.a.createElement(i.a,null)}))));t.default=y}}]);